{"version":3,"sources":["Note.js","GuitarString.js","ui/SelectBox.js","utils.js","Scale.js","models/GuitarState.js","ChordProgression.js","models/Beat.js","models/AudioFiles.js","ui/IntSelectBox.js","Metronome.js","models/DocParamMap.js","Fretboard.js","App.js","index.js"],"names":["CENTER","Note","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","state","toneState","value","select","bind","_assertThisInitialized","_createClass","key","event","stopPropagation","preventDefault","this","onClick","deg","radius","rad","Math","PI","x","cos","y","sin","startDeg","endDeg","data","scales","length","i","min","p","cacluatePointOnCircle","_this2","scaleCount","textColor","isInKey","pieSizeInDegs","isUse","usedIn","size","pos","_jsx","id","className","children","_jsxs","map","nextScale","showMe","isUsedInScale","intLabel","getIntervalLabel","fill","color","opacity","enabled","stroke","d","createLinesAlongCurve","fontSize","dominantBaseline","textAnchor","cx","cy","r","strokeWidth","name","React","Component","GuitarString","stringState","notes","_loop","tone","tones","musicKey","find","e","push","uid","SelectBox","newValue","options","next","target","setState","onChange","forEach","element","label","selectOption","defaultValue","TONES","MAJOR_SEMITONS","MINOR_SEMITONS","buildKey","startingPos","semitones","t","startingSemitone","Utils","COLORS","red","g","b","blue","green","KEYS","C_MAJOR","C_MINOR","D_MAJOR","D_MINOR","E_MAJOR","E_MINOR","F_MAJOR","F_MINOR","G_MAJOR","G_MINOR","A_MAJOR","A_MINOR","B_MAJOR","B_MINOR","POSITIONS","FIRST","rootStringNumber","positionName","abr","fretOffsets","intervals","FIRST_MAJOR_ARPPEGIO","FIRST_MAJOR_7_ARPPEGIO","FIRST_DOM_7_ARPPEGIO","FIRST_MINOR_ARPPEGIO","FIRST_MINOR_7_ARPPEGIO","FIRST_MAJOR_PENTA","FIRST_MINOR_PENTA","SECOND","SECOND_MAJOR_TRIAD_ARPEGGIO","default","SECOND_MAJOR_7_ARPEGGIO","SECOND_DOM_7_ARPEGGIO","SECOND_MINOR_TRIAD_ARPEGGIO","SECOND_MINOR_7_ARPEGGIO","SECOND_MINOR_7_B5_ARPEGGIO","SECOND_MAJOR_PENTA","SECOND_MINOR_PENTA","THIRD","THIRD_MAJOR_7_ARPEGGIO","THIRD_DOM_7_ARPEGGIO","THIRD_MINOR_7_ARPEGGIO","THRID_MAJOR_PENTA","THIRD_MINOR_PENTA","FORTH","FORTH_MAJOR_7_ARPEGGIO","FORTH_DOM_7_ARPEGGIO","FORTH_MINOR_7_ARPEGGIO","FORTH_MINOR_PENTA","FIFTH_MAJOR_7_SCALE","FIFTH_MAJOR_7_ARPEGGIO","FIFTH_DOM_7_ARPEGGIO","FIFTH_MINOR_7_ARPEGGIO","FIFTH_MAJOR_PENTA","FIFTH_MINOR_PENTA","resolveNotesForScale","guitarState","fret","position","Map","offsets","s","stringOffsets","f","n","getNoteAt","set","getPositionsForString","string","Object","values","filter","getDefaultPositionForString","stringNumber","availablePositions","undefined","Scale","apply","arguments","onDelete","newPosition","evt","onCheck","addToProgression","url","style","backgroundColor","type","checked","href","rel","delete","SCALE_COLORS","ToneState","toneName","scale","intervalLabel","has","get","StringState","intervalOffset","fretNumber","ScalePattern","fretNum","scaleNumber","setPosition","toneStates","remove","add","GuitarState","strings","scalePatterns","scalePattern","stringNum","note","indexOf","ChordProgression","prog","progression","pIdx","getScales","beat","currentBar","getBar","k","active","dots","count","bpb","renderProgression","tickLabels","Beat","beatPerMinute","beatsPerBar","ticksPerBeat","tickCount","beatNum","getBeat","tickNum","getTick","getTickLabels","floor","_fetchAudio","_asyncToGenerator","_regeneratorRuntime","mark","_callee","callback","audioCtx","request","wrap","_context","prev","window","AudioContext","webkitAudioContext","XMLHttpRequest","open","process","responseType","onload","status","responseData","response","console","log","decodeAudioData","buffer","send","abrupt","stop","AudioRepo","files","onComplete","self","_x","_x2","fetchAudio","setAudioBuffer","newName","mixed","dest","createBuffer","numberOfChannels","sampleRate","channel","toBuff","getChannelData","fromBuff","AudioFiles","fileMap","beatName","audioFile","FILES","getAudioBuffer","mergeAs","AudioLib","Array","of","IntSelectBox","labels","val","idx","audioFiles","Metronome","bpm","tpb","swing","volume","playing","interval","audioOut","source","createBufferSource","createGain","connect","destination","tick","gain","getAudioFile","getTickLabel","start","onBeatChange","tickInMs","keepGoing","first","beep","nextTickInMs","getNextTickInMs","setTimeout","scheduleTick","newVal","onStop","newBpm","Number","parseInt","field","newState","res","getTicksPerBeat","css","_this3","updateState","setAudioFiles","startStop","renderTicks","DocParamMap","search","document","location","charAt","substring","split","nv","param","existingValues","defVal","vals","getValues","getValue","v","Fretboard","urlParams","keyName","savedScales","args","positionNum","createScalePatternAt","positions","getValuesAsInts","getValueAsInt","setActiveScale","reloadGuitarState","newKey","deleteScalePattern","rowNum","getRowNumberForScale","newScale","fretCount","allKeys","fretMarkers","updateKey","onBeatStop","onNoteClick","item","deleteScale","updatePosition","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.8aaf59db.chunk.js","sourcesContent":["import React from 'react';\n\nconst CENTER = {x: 50, y: 50};\n\n\nclass Note extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        toneState: props.value\n      };\n      this.select = this.select.bind(this);\n    }\n  \n    select(event) {\n        event.stopPropagation();\n        event.preventDefault();\n        \n        this.props.onClick(this.props.value);\n     }    \n  \n    cacluatePointOnCircle(deg, radius) {\n      // ð‘¥=ð‘Ÿ sinðœƒ, ð‘¦ = ð‘Ÿ cosðœƒ.\n      const piFactor = (Math.PI / 180);\n      const rad = deg * piFactor;\n      return { \n          x: Math.cos(rad) * radius, \n          y: Math.sin(rad) * radius\n      };\n    }\n\n    createLinesAlongCurve(startDeg, endDeg, radius) {\n        const deltaDeg = 5;\n        let data = \"M \" + CENTER.x + \" \" + (this.props.scales.length > 1 ? CENTER.y : CENTER.y - radius) + \" \\n\";\n        for(let i = startDeg; i < (endDeg + deltaDeg); i = i + deltaDeg) {\n            const deg = Math.min(i, endDeg);\n            const p = this.cacluatePointOnCircle(deg, radius);\n            let x = CENTER.x + p.x;\n            let y = CENTER.y + p.y;\n            data += \" L \" + x + \" \" + y + \" \\n\";\n        }\n        return data + \" z\";\n    }\n\n    createPath() {\n        return ;\n    }\n\n    render() {\n      let className = 'note';\n      \n      const scaleCount = this.props.scales.length;\n      const textColor = this.props.isInKey ? \"black\" : \"#ccc\";\n      const radius = 20;\n      const pieSizeInDegs = scaleCount > 0 ? 360 / scaleCount : 0;\n      const isUse = this.state.toneState.usedIn.size > 0;\n      let pos = 0;\n      \n      \n      return (\n          <div\n            id={this.props.id}\n            key={this.props.id}\n            onClick={this.select}\n            className={className}>\n                \n            <svg>\n                {this.props.scales.map(nextScale => {\n                        pos = pos + 1;\n                        const showMe = this.state.toneState.isUsedInScale(nextScale); //usedIn.find(n => n.uid === nextScale.uid) !== undefined\n                        if (isUse && showMe) {\n                          const intLabel = this.state.toneState.getIntervalLabel(nextScale);\n                          const startDeg = (pos - 1) * pieSizeInDegs - 90;\n                          const endDeg = pos * pieSizeInDegs - 90;\n\n                          const p = this.cacluatePointOnCircle((endDeg + startDeg) / 2, radius + radius/2);\n                          return (\n                            <g key={this.props.id + \".\" + pos}>\n                              <path fill={ nextScale.color } \n                                    opacity={nextScale.enabled ? 1.0 : 0.25 } \n                                    stroke=\"black\" \n                                    d={this.createLinesAlongCurve(startDeg, endDeg, radius * 2)} />\n                              <text x={CENTER.x + p.x} y={CENTER.y + p.y} fontSize=\"16\" \n                                    stroke={nextScale.enabled ? \"white\" : \"black\" } \n                                    dominantBaseline=\"central\" \n                                    textAnchor=\"middle\">{intLabel}</text>\n                            </g>\n                          );\n                        }\n                        return (\"<path />\");\n                })}\n\n                <circle key={this.props.id + \"circle\"} cx={CENTER.x} cy={CENTER.y} r={radius*2/3} \n                    stroke=\"black\" strokeWidth=\"1\" \n                    fill={\"#ccc\"}/>\n                \n                <text key={this.props.id + \"text\"} x={CENTER.x} y={CENTER.y} \n                    fill={textColor}\n                    fontSize=\"20\"\n                    dominantBaseline=\"central\" textAnchor=\"middle\">{this.props.value.name}</text>\n            </svg>\n          </div>);\n    }\n  }\n\n  export default Note;","import React from 'react';\nimport Note from './Note.js';\n\nclass GuitarString extends React.Component {\n\n    constructor(props) {\n      super(props);\n      this.state = {\n        stringState: props.value\n      };\n    }\n  \n    render() {\n      const notes = [];\n      for (let i=0; i < this.state.stringState.tones.length; i++) {\n        const tone = this.state.stringState.tones[i];\n        const isInKey = this.props.musicKey.tones.find(e => e === tone.name);\n        notes.push((\n          <Note\n            key={tone.uid}\n            onClick={this.props.onClick}\n            isInKey={isInKey}\n            scales={this.props.scales}\n            value={tone}\n            /> \n        ));\n      }\n\n      return (<div className=\"string\">{notes}</div>);\n    }\n  }\n\n  export default GuitarString;","import React from 'react';\n\nclass SelectBox extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            value: props.value\n        };\n    }\n\n    selectOption(e) {\n        const newValue = this.props.options.find(next => next.name === e.target.value)\n        this.setState({\n            value: newValue\n        });\n        this.props.onChange(newValue);\n    }\n\n    render() {\n        const children = [];\n\n        this.props.options.forEach(element => {\n            children.push((\n                <option key={element.name}>{element.name}</option>\n            ))\n        });\n\n        return (<div className=\"selectBox\">\n            <div className=\"selectBoxLabel\">{this.props.label}</div>\n            <select onChange={ (e) => this.selectOption(e) } defaultValue={this.state.value.name} >\n                    {children}\n            </select>\n        </div>);\n    }\n  }\n\nexport default SelectBox;","const TONES = [\"C\",\"C#\",\"D\",\"D#\",\"E\",\"F\",\"F#\",\"G\",\"G#\",\"A\",\"A#\",\"B\"];\nconst MAJOR_SEMITONS = [0, 2, 4, 5, 7, 9, 11];\nconst MINOR_SEMITONS = [0, 2, 3, 5, 7, 8, 10];\n\n\nconst buildKey = (name, startingPos, semitones) => {\n    const tones = [];\n    semitones.forEach(t => {\n        tones.push(TONES[(startingPos + t) % TONES.length]);\n    });\n    return {\n        name: name,\n        startingSemitone: startingPos,\n        semitones: semitones,\n        tones: tones\n    };\n}\n\nconst resolveNotesForScale = (guitarState, fret, position) => {\n    const notes = new Map();\n    const offsets = position.fretOffsets;\n    const intervals = position.intervals;\n\n    for(let s = 0 ; s < offsets.length; s = s + 1) {\n        const stringOffsets = offsets[s];\n        for (let f = 0; f < stringOffsets.length; f = f + 1) {\n            const n = guitarState.getNoteAt(s, fret + stringOffsets[f]);\n            if (n) {\n                notes.set(n, intervals ? intervals[s][f] : \"?\");\n            }\n        }\n    }\n    return notes;\n}\n\n// const resolveIntervalLabelForScale = (position, stringNumber, fret) => {\n//     const offsets = position.fretOffsets[stringNumber];\n//     for(let i = 0; i < offsets.length; i = i + 1) {\n//         let p = position.offsets[i];\n//         if (p === fret) {\n//             return position.intervals[string][p];\n//         }\n//     }\n//     return undefined;\n// }\n\nconst Utils = {\n    TONES: TONES,\n    COLORS: {\n        red:   {r: 255, g:0,    b:0},\n        blue:  {r: 0,   g:0,    b:255},\n        green: {r: 0,   g:255,  b:0}\n    },\n    KEYS: {\n        C_MAJOR: buildKey('C-Major', 0, MAJOR_SEMITONS),\n        C_MINOR: buildKey('C-Minor', 0, MINOR_SEMITONS),\n        \n        D_MAJOR: buildKey('D-Major', 2, MAJOR_SEMITONS),\n        D_MINOR: buildKey('D-Minor', 2, MINOR_SEMITONS),\n        \n        E_MAJOR: buildKey('E-Major', 4, MAJOR_SEMITONS),\n        E_MINOR: buildKey('E-Minor', 4, MINOR_SEMITONS),\n\n        F_MAJOR: buildKey('F-Major', 5, MAJOR_SEMITONS),\n        F_MINOR: buildKey('F-Minor', 5, MINOR_SEMITONS),\n\n        G_MAJOR: buildKey('G-Major', 7, MAJOR_SEMITONS),\n        G_MINOR: buildKey('G-Minor', 7, MINOR_SEMITONS),\n\n        A_MAJOR: buildKey('A-Major', 9, MAJOR_SEMITONS),\n        A_MINOR: buildKey('A-Minor', 9, MINOR_SEMITONS),\n\n        B_MAJOR: buildKey('B-Major', 11, MAJOR_SEMITONS),\n        B_MINOR: buildKey('B-Minor', 11, MINOR_SEMITONS),\n    },\n\n    POSITIONS: {\n        FIRST: {\n            rootStringNumber: 4,\n            positionName: \"1st\",\n            name: \"1st - Scale\",\n            abr: \"\",\n            fretOffsets: [\n                [-3, -2, 0],\n                [-3, -2, 0],\n                [-3, -1],\n                [-3, -1, 0],\n                [-3, -1, 0],\n                [-3, -2, 0],\n            ],\n            intervals: [\n                [\"3\", \"4\" , \"5\"],\n                [\"7\", \"1\", \"2\"],\n                [\"5\", \"6\"],\n                [\"2\", \"3\", \"4\"],\n                [\"6\", \"7\", \"1\"],\n                [\"3\", \"4\", \"5\"],\n            ]\n        },\n        FIRST_MAJOR_ARPPEGIO: {\n            rootStringNumber: 4,\n            name: \"1st - Major Triad Arpeggio\",\n            positionName: \"1st\",\n            abr: \"maj\",\n            fretOffsets: [\n                [-3, 0],\n                [-2],\n                [-3],\n                [-1],\n                [0],\n                [-3, 0],\n            ],\n            intervals: [\n                [\"3\", \"5\"],\n                [\"1\"],\n                [\"5\"],\n                [\"3\"],\n                [\"1\"],\n                [\"3\", \"5\"],\n            ]\n        },\n        FIRST_MAJOR_7_ARPPEGIO: {\n            rootStringNumber: 4,\n            name: \"1st - Major 7 Arpeggio\",\n            positionName: \"1st\",\n            abr: \"maj7\",\n            fretOffsets: [\n                [-3, 0],\n                [-3, -2],\n                [-3],\n                [-1],\n                [-1, 0],\n                [-3, 0],\n            ],\n            intervals: [\n                [\"3\", \"5\"],\n                [\"7\", \"1\"],\n                [\"5\"],\n                [\"3\"],\n                [\"7\", \"1\"],\n                [\"3\", \"5\"],\n            ]\n        },\n        FIRST_DOM_7_ARPPEGIO: {\n            rootStringNumber: 4,\n            positionName: \"1st\",\n            name: \"1st - Dom 7 Arpeggio\",\n            abr: \"dom7\",\n            fretOffsets: [\n                [-3, 0],\n                [-2],\n                [-3, 0],\n                [-1],\n                [-2, 0],\n                [-3, 0],\n            ],\n            intervals: [\n                [\"3\", \"5\"],\n                [\"1\"],\n                [\"5\", \"b7\"],\n                [\"3\"],\n                [\"b7\", \"1\"],\n                [\"3\", \"5\"],\n            ]\n        },\n        FIRST_MINOR_ARPPEGIO: {\n            rootStringNumber: 4,\n            positionName: \"1st\",\n            name: \"1st - Minor Triad Arpeggio\",\n            abr: \"min7\",\n            fretOffsets: [\n                [0],\n                [-2, 1],\n                [-3],\n                [-2],\n                [0],\n                [0],\n            ],\n            intervals: [\n                [\"5\"],\n                [\"1\", \"b3\"],\n                [\"5\"],\n                [\"b3\"],\n                [\"1\"],\n                [\"5\"],\n            ]\n        },\n        FIRST_MINOR_7_ARPPEGIO: {\n            rootStringNumber: 4,\n            positionName: \"1st\",\n            name: \"1st - Minor 7 Arpeggio\",\n            abr: \"min7\",\n            fretOffsets: [\n                [0],\n                [-2, 1],\n                [-3, 0],\n                [-2],\n                [-2, 0],\n                [0],\n            ],\n            intervals: [\n                [\"5\"],\n                [\"1\", \"b3\"],\n                [\"5\", \"b7\"],\n                [\"b3\"],\n                [\"b7\",\"1\"],\n                [\"5\"],\n            ]\n        },\n        FIRST_MAJOR_PENTA: {\n            rootStringNumber: 4,\n            positionName: \"1st\",\n            name: \"1st - Pentatonic (Major)\",\n            abr: \"maj\",\n            fretOffsets: [\n                [-3,  0],\n                [-2,  0],\n                [-3, -1],\n                [-3, -1],\n                [-3,  0],\n                [-3,  0],\n            ],intervals: [\n                [\"3\", \"5\"],\n                [\"1\", \"2\"],\n                [\"5\", \"6\"],\n                [\"2\", \"3\"],\n                [\"6\", \"1\"],\n                [\"3\", \"5\"],\n            ]\n        },\n        FIRST_MINOR_PENTA: {\n            rootStringNumber: 4,\n            positionName: \"1st\",\n            name: \"1st - Pentatonic (Minor)\",\n            abr: \"min\",\n            fretOffsets: [\n                [-2,  0],\n                [-2,  1],\n                [-3,  0],\n                [-2,  0],\n                [-2,  0],\n                [-2,  0],\n            ],intervals: [\n                [\"4\",  \"5\"],\n                [\"1\", \"b3\"],\n                [\"5\", \"b7\"],\n                [\"b3\", \"4\"],\n                [\"b7\", \"1\"],\n                [ \"4\", \"5\"],\n            ]\n        },\n        SECOND: {\n            rootStringNumber: 4,\n            positionName: \"2nd\",\n            name: \"2nd - Scale\",\n            abr: \"\",\n            fretOffsets: [\n                [0, 2, 4],\n                [0, 2, 3],\n                [-1, 1 , 2],\n                [-1, 0 , 2],\n                [-1, 0 , 2],\n                [0 , 2],\n            ],\n            intervals: [\n                [\"5\",\"6\",\"7\"],\n                [\"2\",\"3\",\"4\"],\n                [\"6\",\"7\",\"1\"],\n                [\"3\",\"4\",\"5\"],\n                [\"7\",\"1\",\"2\"],\n                [\"5\",\"6\"],\n            ]\n        },\n        SECOND_MAJOR_TRIAD_ARPEGGIO: {\n            default: false,\n            rootStringNumber: 4,\n            positionName: \"2nd\",\n            name: \"2nd - Major Triad Arpeggio\",\n            abr: \"maj\",\n            fretOffsets: [\n                [0],\n                [2],\n                [2],\n                [-1, 2],\n                [0],\n                [0 ],\n            ],\n            intervals: [\n                [\"5\"],\n                [\"3\"],\n                [\"1\"],\n                [\"3\",\"5\"],\n                [\"1\"],\n                [\"5\"],\n            ]\n        },\n        SECOND_MAJOR_7_ARPEGGIO: {\n            default: true,\n            rootStringNumber: 4,\n            positionName: \"2nd\",\n            name: \"2nd - Major 7 Arpeggio\",\n            abr: \"maj7\",\n            fretOffsets: [\n                [0 , 4],\n                [2],\n                [1 , 2],\n                [-1, 2],\n                [-1, 0],\n                [0 ],\n            ],\n            intervals: [\n                [\"5\",\"7\"],\n                [\"3\"],\n                [\"7\",\"1\"],\n                [\"3\",\"5\"],\n                [\"7\",\"1\"],\n                [\"5\"],\n            ]\n        },\n        SECOND_DOM_7_ARPEGGIO: {\n            rootStringNumber: 4,\n            positionName: \"2nd\",\n            name: \"2nd - Dom 7 Arpeggio\",\n            abr: \"dom7\",\n            fretOffsets: [\n                [0 , 3],\n                [2],\n                [0 , 2],\n                [-1, 2],\n                [0],\n                [0, 3 ],\n            ],intervals: [\n                [\"5\",\"b7\"],\n                [\"3\"],\n                [\"b7\",\"1\"],\n                [\"3\",\"5\"],\n                [\"1\"],\n                [\"5\",\"b7\"],\n            ]\n        },\n        SECOND_MINOR_TRIAD_ARPEGGIO: {\n            rootStringNumber: 4,\n            positionName: \"2nd\",\n            name: \"2nd - Minor Triad Arpeggio\",\n            abr: \"min\",\n            fretOffsets: [\n                [0],\n                [1],\n                [2],\n                [2],\n                [0, 3],\n                [0],\n            ],intervals: [\n                [\"5\"],\n                [\"b3\"],\n                [\"1\"],\n                [\"5\"],\n                [\"1\", \"b3\"],\n                [\"5\"],\n            ]\n        },\n        SECOND_MINOR_7_ARPEGGIO: {\n            rootStringNumber: 4,\n            positionName: \"2nd\",\n            name: \"2nd - Minor 7 Arpeggio\",\n            abr: \"min7\",\n            fretOffsets: [\n                [0 , 3],\n                [1],\n                [0 , 2],\n                [2],\n                [0, 3],\n                [0, 3],\n            ],intervals: [\n                [\"5\",\"b7\"],\n                [\"b3\"],\n                [\"b7\",\"1\"],\n                [\"5\"],\n                [\"1\", \"b3\"],\n                [\"5\",\"b7\"],\n            ]\n        },\n        SECOND_MINOR_7_B5_ARPEGGIO: {\n            rootStringNumber: 4,\n            positionName: \"2nd\",\n            name: \"2nd - Minor 7 b5 Arpeggio\",\n            abr: \"min7b5\",\n            fretOffsets: [\n                [-1 , 3],\n                [1],\n                [0 , 2],\n                [1],\n                [0, 3],\n                [-1, 3],\n            ],intervals: [\n                [\"b5\",\"b7\"],\n                [\"b3\"],\n                [\"b7\",\"1\"],\n                [\"b5\"],\n                [\"1\", \"b3\"],\n                [\"b5\",\"b7\"],\n            ]\n        },\n        SECOND_MAJOR_PENTA: {\n            rootStringNumber: 4,\n            positionName: \"2nd\",\n            name: \"2nd - Pentatonic (Major)\",\n            abr: \"maj\",\n            fretOffsets: [\n                [ 0, 2],\n                [ 0, 2],\n                [-1, 2],\n                [-1, 2],\n                [ 0, 2],\n                [ 0, 2],\n            ],intervals: [\n                [\"2\", \"6\"],\n                [\"3\", \"3\"],\n                [\"6\", \"1\"],\n                [\"3\", \"5\"],\n                [\"1\", \"2\"],\n                [\"5\", \"6\"],\n            ]\n        },\n        SECOND_MINOR_PENTA: {\n            rootStringNumber: 4,\n            positionName: \"2nd\",\n            name: \"2nd - Pentatonic (Minor)\",\n            abr: \"min\",\n            fretOffsets: [\n                [0, 3],\n                [1, 3],\n                [0, 2],\n                [0, 2],\n                [0, 3],\n                [0, 3],\n            ],intervals: [\n                [\"5\", \"b7\"],\n                [\"b3\", \"4\"],\n                [\"b7\", \"1\"],\n                [\"4\",  \"5\"],\n                [\"1\", \"b3\"],\n                [\"5\", \"b7\"],\n            ]\n        },\n        THIRD: {\n            rootStringNumber: 5,\n            positionName: \"3rd\",\n            name: \"3rd - Scale\",\n            abr: \"\",\n            fretOffsets: [\n                [-3, -1, 0],\n                [-3, -2, 0],\n                [-4, -3, -1],\n                [-3, -1],\n                [-3, -1, 0],\n                [-3, -1, 0],\n            ],\n            intervals: [\n                [\"6\", \"7\", \"1\"],\n                [\"3\", \"4\", \"5\"],\n                [\"7\", \"1\", \"2\"],\n                [\"5\", \"6\"],\n                [\"2\", \"3\", \"4\"],\n                [\"6\", \"7\", \"1\"],\n            ]\n        },\n        THIRD_MAJOR_7_ARPEGGIO: {\n            rootStringNumber: 5,\n            positionName: \"3rd\",\n            name: \"3rd - Major 7 Arpeggio\",\n            abr: \"maj7\",\n            fretOffsets: [\n                [-1, 0],\n                [-3, 0],\n                [-4, -3],\n                [-3],\n                [-1],\n                [-1, 0],\n            ],\n            intervals: [\n                [\"7\", \"1\"],\n                [\"3\", \"5\"],\n                [\"7\", \"1\"],\n                [\"5\"],\n                [\"3\"],\n                [\"7\", \"1\"],\n            ]\n        },\n        THIRD_DOM_7_ARPEGGIO: {\n            rootStringNumber: 5,\n            positionName: \"3rd\",\n            name: \"3rd - Dom 7 Arpeggio\",\n            abr: \"dom7\",\n            fretOffsets: [\n                [-2, 0],\n                [-3, 0],\n                [-3],\n                [-3, 0],\n                [-1],\n                [-2, 0],\n            ],\n            intervals: [\n                [\"b7\", \"1\"],\n                [\"3\", \"5\"],\n                [\"1\"],\n                [\"5\", \"b7\"],\n                [\"3\"],\n                [\"b7\", \"1\"],\n            ]\n        }, \n        THIRD_MINOR_7_ARPEGGIO: {\n            rootStringNumber: 5,\n            positionName: \"3rd\",\n            name: \"3rd - Minor 7 Arpeggio\",\n            abr: \"min7\",\n            fretOffsets: [\n                [-2, 0],\n                [0],\n                [-3, 0],\n                [-3, 0],\n                [-2],\n                [-2, 0],\n            ],\n            intervals: [\n                [\"b7\", \"1\"],\n                [\"5\"],\n                [\"1\", \"b3\"],\n                [\"5\", \"b7\"],\n                [\"b3\"],\n                [\"b7\", \"1\"],\n            ]\n        },\n        THRID_MAJOR_PENTA: {\n            rootStringNumber: 5,\n            positionName: \"3rd\",\n            name: \"3rd - Pentatonic (Major)\",\n            abr: \"maj\",\n            fretOffsets: [\n                [-3, 0],\n                [-3, 0],\n                [-3, -1],\n                [-3, -1],\n                [-3, -1],\n                [-3, 0],\n            ],intervals: [\n                [\"6\", \"1\"],\n                [\"3\", \"5\"],\n                [\"1\", \"2\"],\n                [\"5\", \"6\"],\n                [\"2\", \"3\"],\n                [\"4\", \"1\"],\n            ]\n        },\n        THIRD_MINOR_PENTA: {\n            rootStringNumber: 5,\n            positionName: \"3rd\",\n            name: \"3rd - Pentatonic (Minor)\",\n            abr: \"dom\",\n            fretOffsets: [\n                [-2, 0],\n                [-2, 0],\n                [-3, 0],\n                [-3, 0],\n                [-2, 0],\n                [-2, 0],\n            ],intervals: [\n                [\"b7\", \"1\"],\n                [ \"4\", \"5\"],\n                [\"1\",  \"3\"],\n                [\"5\",  \"b7\"],\n                [\"b3\", \"4\"],\n                [\"b7\", \"1\"],\n            ]\n        },\n        FORTH: {\n            rootStringNumber: 5,\n            positionName: \"4th\",\n            name: \"4th - Scale\",\n            abr: \"\",\n            fretOffsets: [\n                [-1, 0 , 2],\n                [0 , 2],\n                [-1, 1 , 2],\n                [-1, 1 , 2],\n                [-1, 0 , 2],\n                [-1, 0 , 2],\n            ],\n            intervals: [\n                [\"7\", \"1\" , \"2\"],\n                [\"5\" , \"6\"],\n                [\"2\", \"3\" , \"4\"],\n                [\"6\", \"7\" , \"1\"],\n                [\"3\", \"4\", \"5\"],\n                [\"7\", \"1\", \"2\"],\n            ]\n        },\n        FORTH_MAJOR_7_ARPEGGIO: {\n            default: true,\n            rootStringNumber: 5,\n            positionName: \"4th\",\n            name: \"4th - Major 7 Arpeggio\",\n            abr: \"maj7\",\n            fretOffsets: [\n                [-1, 0],\n                [0],\n                [1],\n                [1 , 2],\n                [-1, 2],\n                [-1, 0],\n            ],intervals: [\n                [\"7\", \"1\"],\n                [\"5\"],\n                [\"3\"],\n                [\"7\" , \"1\"],\n                [\"3\", \"5\"],\n                [\"7\", \"1\"],\n            ]\n        },\n        FORTH_DOM_7_ARPEGGIO: {\n            rootStringNumber: 5,\n            positionName: \"4th\",\n            name: \"4th - Dom 7 Arpeggio\",\n            abr: \"7\",\n            fretOffsets: [\n                [0],\n                [0, 3],\n                [1],\n                [0 , 2],\n                [-1, 2],\n                [0],\n            ],intervals: [\n                [\"1\"],\n                [\"5\", \"b7\"],\n                [\"3\"],\n                [\"b7\" , \"1\"],\n                [\"3\", \"5\"],\n                [\"1\"],\n            ]\n        },\n        FORTH_MINOR_7_ARPEGGIO: {\n            rootStringNumber: 5,\n            positionName: \"4th\",\n            name: \"4th - Minor 7 Arpeggio\",\n            abr: \"min7\",\n            fretOffsets: [\n                [0, 3],\n                [0, 3],\n                [0],\n                [0 , 2],\n                [2],\n                [0, 3],\n            ],intervals: [\n                [\"1\", \"b3\"],\n                [\"5\", \"b7\"],\n                [\"b3\"],\n                [\"b7\" , \"1\"],\n                [\"5\"],\n                [\"1\", \"b3\"],\n            ]\n        },\n        FORTH_MINOR_PENTA: {\n            rootStringNumber: 5,\n            positionName: \"4th\",\n            name: \"4th - Pentatonic (Minor)\",\n            abr: \"min\",\n            fretOffsets: [\n                [ 0,  3],\n                [ 0,  3],\n                [ 0,  2],\n                [ 0,  2],\n                [ 0,  2],\n                [ 0,  3],\n            ],intervals: [\n                [\"1\", \"b3\"],\n                [\"5\", \"b7\"],\n                [\"b3\", \"4\"],\n                [\"b7\", \"1\"],\n                [\"4\", \"5\"],\n                [\"1\", \"b3\"],\n            ]\n        },\n        FIFTH_MAJOR_7_SCALE: {\n            rootStringNumber: 3,\n            positionName: \"5th\",\n            name: \"5th - Major 7 Scale\",\n            abr: \"maj7\",\n            fretOffsets: [\n                [0, 2, 3],\n                [0, 2, 3],\n                [-1, 0, 2],\n                [-1, 0, 2],\n                [0, 2],\n                [0, 2, 3],\n            ],intervals: [\n                [\"2\", \"3\", \"4\"],\n                [\"6\", \"7\", \"1\"],\n                [\"3\", \"4\", \"5\"],\n                [\"7\", \"1\", \"2\"],\n                [\"5\", \"6\"],\n                [\"2\", \"3\", \"4\"],\n            ]\n        },\n        FIFTH_MAJOR_7_ARPEGGIO: {\n            default: true,\n            rootStringNumber: 3,\n            positionName: \"5th\",\n            name: \"5th - Major 7 Arpeggio\",\n            abr: \"maj7\",\n            fretOffsets: [\n                [2],\n                [2, 3],\n                [-1, 2],\n                [-1, 0],\n                [0],\n                [2],\n            ],intervals: [\n                [\"3\"],\n                [\"7\", \"1\"],\n                [\"3\", \"5\"],\n                [\"7\", \"1\"],\n                [\"5\"],\n                [\"3\"],\n            ]\n        },\n        FIFTH_DOM_7_ARPEGGIO: {\n            rootStringNumber: 3,\n            positionName: \"5th\",\n            name: \"5th - Dom 7 Arpeggio\",\n            abr: \"7\",\n            fretOffsets: [\n                [2],\n                [1, 3],\n                [-1, 2],\n                [0],\n                [0, 3],\n                [2],\n            ],intervals: [\n                [\"3\"],\n                [\"b7\", \"1\"],\n                [\"3\", \"5\"],\n                [\"1\"],\n                [\"5\", \"b7\"],\n                [\"3\"],\n            ]\n        },\n        FIFTH_MINOR_7_ARPEGGIO: {\n            rootStringNumber: 3,\n            positionName: \"5th\",\n            name: \"5th - Minor 7 Arpeggio\",\n            abr: \"min7\",\n            fretOffsets: [\n                [1],\n                [1, 3],\n                [2],\n                [0, 3],\n                [0, 3],\n                [2],\n            ],intervals: [\n                [\"b3\"],\n                [\"b7\", \"1\"],\n                [\"5\"],\n                [\"1\",\"b3\"],\n                [\"5\", \"b7\"],\n                [\"b3\"],\n            ]\n        },\n        FIFTH_MAJOR_PENTA: {\n            rootStringNumber: 3,\n            positionName: \"5th\",\n            name: \"5th - Pentatonic (Major)\",\n            abr: \"maj\",\n            fretOffsets: [\n                [ 0,  2],\n                [ 0,  3],\n                [-1,  2],\n                [ 0,  2],\n                [ 0,  2],\n                [ 0,  2],\n            ],intervals: [\n                [\"2\", \"3\"],\n                [\"6\", \"1\"],\n                [\"3\", \"5\"],\n                [\"1\", \"2\"],\n                [\"5\", \"6\"],\n                [\"2\", \"3\"],\n            ]\n        },\n        FIFTH_MINOR_PENTA: {\n            rootStringNumber: 3,\n            positionName: \"5th\",\n            name: \"5th - Pentatonic (Minor)\",\n            abr: \"-\",\n            fretOffsets: [\n                [ 1,  3],\n                [ 1,  3],\n                [ 0,  2],\n                [ 0,  3],\n                [ 0,  3],\n                [ 1,  3],\n            ],intervals: [\n                [\"b3\", \"4\"],\n                [\"b7\", \"1\"],\n                [ \"4\", \"5\"],\n                [ \"1\", \"b3\"],\n                [ \"5\", \"b7\"],\n                [\"b3\", \"4\"],\n            ]\n        },\n    },\n\n    resolveNotesForScale: resolveNotesForScale,\n    //resolveIntervalLabelForScale: resolveIntervalLabelForScale,\n    /* returns all positions for a string */\n    getPositionsForString(string) {\n        return Object.values(this.POSITIONS).filter(n => n.rootStringNumber === string);        \n    },\n    /* returns the default position for a string */\n    getDefaultPositionForString(stringNumber) {\n        const availablePositions = this.getPositionsForString(stringNumber);\n\n        if (availablePositions === undefined || availablePositions.length < 1) {\n          return [];\n        }\n\n        return availablePositions.find(n => n.default === true);\n    }\n};\n\nexport default Utils;","import React from 'react';\nimport SelectBox from './ui/SelectBox';\nimport Utils from './utils';\n\nclass Scale extends React.Component {\n   \n\n    delete() {\n        if (this.props.onDelete) {\n            this.props.onDelete(this.props.value);\n        }\n    }\n\n    select(newPosition) {\n        if (this.props.onChange) {\n            this.props.onChange(this.props.value, newPosition);\n        }\n    }\n\n    onCheck(evt) {\n        if (this.props.onCheck) {\n            this.props.onCheck(this.props.value);\n        }\n    }\n    \n    addToProgression() {\n        if (this.props.addToProgression) {\n            this.props.addToProgression(this.props.value);\n        }   \n    }\n\n    render() {\n        const url = 'https://onlineguitarbooks.com/' + this.props.value.name + '-chord/';\n\n        const style = {\n            backgroundColor: this.props.value.color\n        };\n        const options = Utils.getPositionsForString(this.props.value.toneState.stringNumber);\n        \n        return (\n            <div>\n                <div style={style}></div>\n                <div>\n                    <input type=\"checkbox\" checked={this.props.value.enabled} onChange={(e) => this.onCheck(e)}/>\n                    <a href={url} target=\"_blank\" rel=\"noreferrer\">\n                    {this.props.value.name} ({this.props.value.toneState.stringNumber + 1}, {this.props.value.toneState.fret})\n                    </a>\n                </div>\n                <div>\n                    <SelectBox\n                        value={this.props.value.position}\n                        options={options}\n                        onChange={(e) => this.select(e)}\n                    />\n                </div>\n                <div>\n                    <button onClick={(e) => this.delete()}>delete</button>\n                    <button onClick={(e) => this.addToProgression()}>add to chord progression</button>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Scale;","import Utils from \"../utils.js\";\n\nconst MAX_FRET_COUNT = 17;\nconst SCALE_COLORS = [\"#4E79A5\", \"#F18F3B\", \"#E0585B\", \"#77B7B2\", \"#5AA155\", \"#EDC958\", \"#AF7AA0\", \"#FE9EA8\", \"#9C7561\", \"#BAB0AC\"];\n\n\nclass ToneState {\n    constructor(uid, toneName, stringNumber, fret) {\n        this.uid = uid;\n        this.name = toneName;\n        this.stringNumber = stringNumber;\n        this.fret = fret;\n        this.usedIn = new Map();\n\n        if (fret === 0) {\n            this.position = \"Open \" + toneName;\n        } else {\n            this.position = toneName + \" \" + (stringNumber + 1)+ \" @ \" + fret;\n        }\n    }\n\n    add(scale, intervalLabel) {\n        this.usedIn.set(scale.uid, intervalLabel);\n    }\n\n    remove(scale) {\n        this.usedIn.delete(scale.uid);\n    }\n\n    isUsedInScale(scale) {\n        return this.usedIn.has(scale.uid)\n    }\n\n    getIntervalLabel(scale) {\n        return this.usedIn.get(scale.uid);\n    }\n}\n\nclass StringState {\n    constructor(intervalOffset, stringNumber) {\n        this.name = Utils.TONES[intervalOffset];\n        this.uid = \"string-\" + this.name + \"-\" + stringNumber;\n        this.intervalOffset = intervalOffset;\n        this.tones = [];\n\n        for (let i = 0; i < MAX_FRET_COUNT; i++) {\n            const pos = intervalOffset + i;\n            const toneName = Utils.TONES[pos % Utils.TONES.length]\n            this.tones.push(\n                new ToneState(this.uid + \".\" + i, toneName, stringNumber, i)\n            );\n        }\n    }\n\n    getNoteAt(fretNumber) {\n        if (fretNumber >= 0 && fretNumber < this.tones.length) {\n            return this.tones[fretNumber];\n        } else {\n            return undefined;\n        }\n    }\n}\n\nclass ScalePattern {\n\n    constructor(guitarState, toneState, stringNumber, fretNum, scaleNumber, color) {\n        this.guitarState = guitarState;\n        this.uid = \"scale.\" + stringNumber + \".\" + fretNum + \".\" + scaleNumber;\n        this.name = toneState.name;\n        this.fret = toneState.fret;\n        this.fretNum = fretNum;\n        this.toneState = toneState;\n        this.scale = Utils.KEYS.C_MAJOR;\n        this.color = color;\n        this.enabled = true;\n        this.setPosition(Utils.getDefaultPositionForString(stringNumber));\n    }\n\n    \n    setPosition(position) {\n        // remove references if already set\n        if (this.toneStates && this.toneStates.length > 0) {\n            for (let t = 0; t < this.toneStates.length; t += 1) {\n                let tone = this.toneStates[t];\n                tone.remove(this);\n            }\n        }\n        \n        // update references \n        this.position = position;\n        if (position) {\n            let notes = Utils.resolveNotesForScale(this.guitarState, this.fretNum, this.position);\n            this.toneStates = [];\n            notes.forEach((intervalLabel, toneState) => {\n                //console.log(\"Adding scale to tone:\", toneState, intervalLabel);\n                toneState.add(this, intervalLabel);\n                this.toneStates.push(toneState);\n            });\n        }\n    }\n}\n\n\n\nclass GuitarState {\n\n    constructor() {\n        this.strings = [];\n        this.strings.push(new StringState(4, 0));\n        this.strings.push(new StringState(11, 1));\n        this.strings.push(new StringState(7, 2));\n        this.strings.push(new StringState(2, 3));\n        this.strings.push(new StringState(9, 4));\n        this.strings.push(new StringState(4, 5));\n\n        this.scalePatterns = [];\n    }\n\n    setActiveScale(scale) {\n        for(let i = 0; i < this.scalePatterns.length; i += 1) {\n            let next = this.scalePatterns[i];\n            next.enabled = !scale || next === scale;\n        }\n    }\n    \n    deleteScalePattern(scalePattern) {\n        scalePattern.setPosition(undefined);\n        this.scalePatterns = this.scalePatterns.filter(e => e !== scalePattern);\n    }\n\n    createScalePatternAt(stringNum, fretNum) {\n        let note = this.getNoteAt(stringNum, fretNum);\n        if (note) {\n            let scaleNumber = this.scalePatterns.length;\n            const color = SCALE_COLORS[scaleNumber % SCALE_COLORS.length];\n\n            let scalePattern = new ScalePattern(\n                this,\n                note,\n                stringNum,\n                fretNum,\n                scaleNumber,\n                color);\n                \n            this.scalePatterns.push(scalePattern);\n            return scalePattern;\n        }\n        return undefined;\n    }\n\n    getNoteAt(stringNumber, fretNumber) {\n        const s = this.strings[stringNumber];\n        return s ? s.getNoteAt(fretNumber) : undefined;\n    }\n\n    getRowNumberForScale(scale) {\n        return this.scalePatterns.indexOf(scale);\n    }\n}\n\nexport default GuitarState;","import React from 'react';\n\nclass ChordProgression extends React.Component {\n\n\n    getScales() {\n        let prog = [];\n        let scales = this.props.scales;\n        let progression = this.props.progression;\n        for(let i =0; i < progression.length ; i += 1) {\n            let pIdx = progression[i];\n            if (pIdx < scales.length) {\n                let scale = scales[pIdx];\n                prog[prog.length] = scale;\n            }\n        }\n        return prog;\n    }\n\n    renderProgression() {\n        let prog = this.getScales();\n        let beat = this.props.beat;\n        let currentBar = beat ? beat.getBar() % prog.length : undefined;\n        return prog.map((k,i) => {\n            const active = i === currentBar; \n            const style = {\n                backgroundColor: k.color,\n                opacity: (active) ? 1 : 0.25\n            }\n            let dots = '';\n            if (active) {\n                let beat = (this.props.count % this.props.bpb) + 1;\n                for (let b = 0; b < beat; b += 1) {\n                    dots += '.';\n                }\n            }\n            return (<div className=\"pill\" key={'c' + i} style={style}>\n                {k.name + k.position.abr} {dots}\n            </div>);\n        });\n    }\n\n    render() {\n      return (\n        <div key=\"progression\" className=\"chordProgressions\">\n            <div className=\"progressions\">{this.renderProgression()}</div>\n        </div>\n      );\n    }\n  }\n\n  export default ChordProgression;","\nconst tickLabels = [\n    [], [],\n    [\"\", \"-AND\"],\n    [\"\", \"-TRIP\", \"-LET\"],\n    [\"\", \"-E\", \"-AND\", \"-UH\"]\n];\n\n\n\nclass Beat {\n\n    constructor(beatPerMinute, beatsPerBar, ticksPerBeat) {\n        this.tickCount = 0;\n        this.beatPerMinute = beatPerMinute;\n        this.beatsPerBar = beatsPerBar;\n        this.ticksPerBeat = ticksPerBeat;\n    }\n\n    getTicksPerBeat() {\n        return this.ticksPerBeat;\n    }\n\n    tick() {\n        this.tickCount += 1;\n    }\n\n    toString() {\n        let beatNum = this.getBeat();\n        let tickNum = this.getTick();\n\n        if (tickNum === 0) {\n            return (beatNum);\n        } else {\n            return this.getTickLabels(tickNum);\n        }\n    }\n\n    getTick() {\n        return this.tickCount % this.ticksPerBeat;\n    }\n\n    getTickLabel(i) {\n        return i === 0 ? (this.getBeat() + 1) : tickLabels[this.ticksPerBeat][i];\n    }\n\n    getBeat() {\n        return Math.floor(this.tickCount / this.ticksPerBeat) % this.beatsPerBar;\n    }\n\n    getBar() {\n        return Math.floor((this.tickCount/ this.ticksPerBeat) / this.beatsPerBar);\n    }\n}\n\n\nexport default Beat;","\n\n\nasync function fetchAudio(name, callback) {\n    let audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n    let request = new XMLHttpRequest();\n    request.open('GET', process.env.PUBLIC_URL + '/mp3/' + name + '.mp3', true);\n    request.responseType = 'arraybuffer';\n    \n    request.onload = function() {\n        try {\n            if (request.status === 200) {\n                let responseData = request.response;\n                console.log(\"Media Loaded: \", request);\n                audioCtx.decodeAudioData(responseData,\n                    (buffer) => {\n                        //console.log(\"Buffer Loaded\", buffer);\n                        callback(name, buffer);\n                    },\n                    (e) => {\n                        console.log(\"Error\", e);\n                    });\n            } else {\n                //console.log(\"Media Load Failed \" + this.response.status);\n            }\n        } catch (e) {\n            console.log(\"Error\", e);\n        }\n    }\n    request.send();\n    return request.responseData;\n}\n\nclass AudioRepo {\n    constructor(files, onComplete) {\n        this.files = {};\n        this.count = 0;\n        \n        for(let i = 0; i < files.length; i++) {\n            let name = files[i];\n            const self = this;\n            fetchAudio(name, (name, buffer) => {\n                console.log(\"loaded \" + name + \" \" + self.count, buffer)\n                self.setAudioBuffer(name, buffer);\n                self.count += 1;\n                if (self.count === files.length) {\n                    onComplete(self);\n                }\n            });\n        }\n    }\n\n    setAudioBuffer(name, buffer) {\n        this.files[name] = buffer;\n    }\n\n    getAudioBuffer(name) {\n        let res = this.files[name];\n        //console.log(name + \" = \" + res);\n        return res;\n    }\n\n    mergeAs(newName, mixed) {\n        let audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n        let dest = undefined;\n\n        for(let i = 0; i < mixed.length; i += 1) {\n            let next = this.files[mixed[i]];\n            if (next !== undefined) {\n                if (dest === undefined) {\n                    dest = audioCtx.createBuffer(\n                        next.numberOfChannels,\n                        next.length,\n                        next.sampleRate);\n                }\n\n                \n                for (let channel = 0; channel < next.numberOfChannels; channel++) {\n                    const toBuff = dest.getChannelData(channel);\n                    const fromBuff = next.getChannelData(channel);\n\n                    for (let i = 0; i < toBuff.length && i < fromBuff.length; i++) {\n                      toBuff[i] = fromBuff[i];\n                    }\n                  }\n            }\n        }\n\n        this.files[newName] = dest;\n    }\n}\n\nclass AudioFiles {\n    constructor(name, fileMap) {\n        this.name = name;\n        this.files = fileMap;\n    }\n\n    getAudioFile(beatName) {\n        let audioFile = this.files[beatName];\n        if (audioFile === undefined) {\n            audioFile = this.files['*'];\n        }\n\n        return FILES.getAudioBuffer(audioFile);\n    }\n}\n\nconst FILES = new AudioRepo([\n        'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight',\n        'eee', 'and', 'uh',\n        'trip', 'let',\n        'drum-set-hi-hat', 'drum-set-snare', 'drum-set-tom', 'drum-set-cymbal', 'drum-set-base',\n        'knock', 'snare'\n    ], \n    (self) => {\n        console.log(\"Complete\", self);\n        self.mergeAs('drum-set-1-3', ['drum-set-hi-hat', 'drum-set-base']);\n        self.mergeAs('drum-set-2-4', ['drum-set-hi-hat', 'drum-set-snare']);\n    }\n);\n\nconst AudioLib = Array.of(\n    new AudioFiles(\n        \"Snoop Dogg\",\n        {\n            '1': 'one',\n            '2': 'two',\n            '3': 'three',\n            '4': 'four',\n            '5': 'five',\n            '6': 'six',\n            '7': 'seven',\n            '8': 'eight',\n            '-E': 'eee',\n            '-AND': 'and',\n            '-UH': 'uh',\n            '-TRIP': 'trip',\n            '-LET': 'let'\n    }),\n    new AudioFiles(\n        \"Rock Beat\",\n        {\n            '1': 'drum-set-1-3',\n            '3': 'drum-set-1-3',\n            '5': 'drum-set-1-3',\n            '7': 'drum-set-1-3',\n\n            '2': 'drum-set-2-4',\n            '4': 'drum-set-2-4',\n            '6': 'drum-set-2-4',\n            '8': 'drum-set-2-4',\n\n            '*': 'drum-set-hi-hat'\n            // '-E': 'knock',\n            // '-AND': 'knock',\n            // '-UH': 'knock',\n            // '-TRIP': 'knock',\n            // '-LET': 'knock'\n    }),\n    new AudioFiles(\"Snare\", { '*': 'snare'}),\n    new AudioFiles(\"Woodblock\", { '*': 'knock'}),\n);\n\nexport default AudioLib;","import React from 'react';\n\nfunction createOptions(values, labels) {\n    return values.map((val, idx) => {\n        return {\n            name: labels ? labels[idx] : '' + val, \n            value: val\n        };\n    });\n}\n\nclass IntSelectBox extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {}\n        this.state.options = createOptions(props.options, props.labels);\n        this.state.value = this.state.options.find(i => i.value === props.value);\n        //console.log(this.state);\n    }\n\n    selectOption(e) {\n        const label = e.target.value;\n        const newValue = this.state.options.find(\n            next => {\n                return next.name === label\n            });\n\n        this.setState({\n            value: newValue\n        });\n\n        this.props.onChange(newValue ? newValue.value : undefined);\n    }\n\n    render() {\n        const children = [];\n\n        this.state.options.forEach(element => {\n            children.push((\n                <option key={element.name}>{element.name}</option>\n            ))\n        });\n\n        return (<div className=\"selectBox\">\n            <div className=\"selectBoxLabel\">{this.props.label}</div>\n            <select onChange={ (e) => this.selectOption(e) } defaultValue={this.state.value && this.state.value.name} >\n                    {children}\n            </select>\n        </div>);\n    }\n}\n\nexport default IntSelectBox;","import React from 'react';\nimport ChordProgression from './ChordProgression';\nimport Beat from './models/Beat';\nimport AudioFiles from './models/AudioFiles';\nimport SelectBox from './ui/SelectBox';\nimport IntSelectBox from './ui/IntSelectBox';\n\nconst audioFiles = AudioFiles;\n\nexport default class Metronome extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            bpm: this.props.bpm,\n            bpb: this.props.bpb,\n            tpb: this.props.tpb,\n            swing: this.props.tpb === 2 ? false : undefined,\n            volume: this.props.volume,\n            playing: false,\n            interval: null,\n            beat: undefined,\n            audioCtx: undefined,\n            audioOut: undefined,\n            audioFiles: audioFiles[0]\n        };\n    }\n\n    beep() {\n        try {\n            let audioCtx = this.state.audioCtx;\n            if (audioCtx === undefined) {\n                audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n            }\n\n            var source = audioCtx.createBufferSource();\n            var audioOut = this.state.audioOut;\n            if (!audioOut) {\n                audioOut = audioCtx.createGain();\n                audioOut.connect(audioCtx.destination);\n            }\n\n            var beat = this.state.beat;\n            if (!beat) {\n                beat = new Beat(this.state.bpm, this.state.bpb, this.state.tpb)\n            } else {\n                beat.tick();\n            }\n\n            let gain = (this.state.volume);\n            if (beat.getTick() === 0) {\n                if (beat.getBeat() !== 0) {\n                    gain /= 2;\n                }\n            } else {\n                gain /= 4;\n            }\n            //console.log(gain);\n            audioOut.gain.value = gain / 10;\n            source.buffer = this.state.audioFiles.getAudioFile(beat.getTickLabel(beat.getTick()));\n            source.connect(audioOut); \n            source.start();\n            \n            if (this.props.onBeatChange) {\n                this.props.onBeatChange(beat)\n            }\n\n            this.setState({\n                beat: beat,\n                audioOut: audioOut,\n                audioCtx: audioCtx\n            });\n        } catch(e) {\n            console.log(\"Error\", e);\n        }\n    }\n\n    doneLoading() {\n        console.log(\"Done Loading\");\n    }\n\n\n    getNextTickInMs() {\n        let p = 0.75;\n        let tickInMs = (60000 / this.state.bpm);\n        if (this.state.tpb === 2 && this.state.swing && this.state.beat) {\n            if (this.state.beat.getTick() === 0) {\n                tickInMs *= p;\n            } else {\n                tickInMs *= 1 - p;\n            }\n        } else {\n            tickInMs /= this.state.tpb;\n        }\n        return tickInMs;\n    }\n\n    scheduleTick(keepGoing, first) {\n        if (!first) {\n            this.beep();\n        }\n        \n        if (keepGoing) {\n            let nextTickInMs = this.getNextTickInMs();\n            //console.log(\"Run in: \" + nextTickInMs);\n            setTimeout(() => this.scheduleTick(this.state.playing), nextTickInMs);\n        }\n    }\n\n\n    startStop() {\n        const newVal = ! this.state.playing;\n        if (!newVal && this.props.onStop) {\n            this.props.onStop();\n        } \n        \n        if (newVal) {\n            this.scheduleTick(newVal, true);\n        }\n\n        this.setState({\n            beat: undefined,\n            playing: newVal,\n        });\n    }\n\n    setBpm(e) {\n        const newBpm = Number.parseInt(e.target.value)\n        this.setState({\n            bpm: newBpm\n        });\n        console.log(\"BPM = \" + newBpm);\n    }\n\n    setBpb(e) {\n        this.setState({\n            bpb: Number.parseInt(e.target.value)\n        })\n    }\n\n    setTpb(e) {\n        let value = Number.parseInt(e.target.value);\n        let enabled = value === 2 ? false : undefined;\n        console.log(\"New Tpb=\" + value + \" \" + enabled)\n        this.setState({\n            tpb: value,\n            swing: enabled\n        })\n    }\n\n    setVolume(e) {\n        this.setState({\n            volume: Number.parseInt(e.target.value)\n        })\n    }\n\n    updateState(field, value) {\n        let newState = {};\n        newState[field] = value;\n        this.setState(newState);\n    }\n\n    setSwing(e) {\n        this.setState({\n            swing: e.target.value\n        })\n    }\n\n    setAudioFiles(e) {\n        this.setState({\n            audioFiles: e\n        })\n    }\n\n    renderTicks() {\n        let res = [];\n        let beat = this.state.beat;\n        if (beat) {\n            for (let r = 0; r < beat.getTicksPerBeat(); r += 1) {\n                let css = beat.getTick() === r ? \"counterOn\" : \"counterOff\";\n                res.push((<div key={\"r\" + r} className={css}>{beat.getTickLabel(r)}</div>));\n            }\n        }\n        return res;\n    }\n\n    render() {\n        return (\n        <div>\n            <div className='metronome'>\n                <IntSelectBox label=\"Counting\"\n                    options={[1, 2, 3, 4]}\n                    labels={[\"Quater Notes\", \"8th Notes\", \"Triplets\" , \"16th Notes\"]}\n                    value={this.state.tpb}\n                    onChange={(val) => this.updateState(\"tpb\" , val)}\n                />\n\n                <IntSelectBox label=\"Swing\"\n                    options={[true, false]}\n                    labels={[\"Yes\", \"No\"]}\n                    value={this.state.swing}\n                    onChange={(val) => this.updateState(\"swing\" , val)}\n                />\n                \n                <IntSelectBox label=\"Beats per Bar\"\n                    options={[2,3,4,5,6,8]}\n                    value={this.state.bpb}\n                    onChange={(val) => this.updateState(\"bpb\" , val)}\n                />\n\n                <IntSelectBox label=\"Beats per minute\"\n                    options={[40, 50, 60, 70, 80, 90, 100, 110, 120, 130, 140]}\n                    value={this.state.bpb}\n                    onChange={(val) => this.updateState(\"bpm\" , val)}\n                />\n\n                <SelectBox label=\"Audio\"\n                    options={audioFiles}\n                    value={this.state.audioFiles}\n                    onChange={(e) => this.setAudioFiles(e)}\n                />\n\n                <IntSelectBox label=\"Volume\"\n                    options={[4,10]}\n                    labels={[\"Low\", \"High\"]}\n                    value={this.state.volume}\n                    onChange={(val) => this.updateState(\"volume\" , val)}\n                />\n\n                <button onClick={(e) => this.startStop()}>{this.state.playing ? 'Stop' : 'Play'}</button>\n\n                <div className='counter'> {this.state.beat && this.renderTicks()} </div>\n            </div>\n\n            <ChordProgression\n                scales={this.props.scales} \n                progression={this.props.progression}\n                beat={this.state.beat} \n                bpb={this.state.bpb}\n                bpm={this.state.bpm}\n                />\n        </div>\n        );\n    }\n}\n","\n\n\n\n\nclass DocParamMap {\n\n  constructor() {\n    let state = {};\n    let search = document.location.search;\n\n    if (search && search.length > 1) {\n      if (search.charAt(0) === '?') {\n          search = search.substring(1);\n      }\n\n      let split = search.split(\"&\");\n      for(let i = 0; i < split.length; i++) {\n          let p = split[i];\n          //console.log(\"Name/Value = \" + p)\n          let nv = p.split(\"=\");\n          if (nv && nv.length === 2) {\n            let param = nv[0];\n            let value = nv[1];\n\n            let existingValues = state[param];\n            if (existingValues === undefined) {\n              state[param] = [ value ];\n\n            } else {\n              existingValues[existingValues.length] = value;\n            }\n          }\n      }\n    }\n    this.values = state;\n  }\n\n  getValues(name, defVal) {\n    return this.values[name] ? this.values[name] : defVal;\n  }\n\n  getValue(name, defVal) {\n    let vals = this.getValues(name);\n    return vals && vals.length > 0 ? vals[0] : defVal;\n  }\n\n  getValueAsInt(name, defVal) {\n    let i = this.getValue(name);\n    return i ? Number.parseInt(i) : defVal;\n  }\n\n  getValuesAsInts(name, defVal) {\n    let vals = this.getValues(name);\n    return vals ? vals.map(v => Number.parseInt(v)) : defVal;\n  }\n}\n\nexport default DocParamMap;","import './css/Fretboard.css';\n\nimport React from 'react';\nimport GuitarString from './GuitarString.js';\nimport Scale from './Scale.js';\nimport SelectBox from './ui/SelectBox';\nimport Utils from './utils';\nimport GuitarState from './models/GuitarState';\nimport Metronome from './Metronome';\nimport DocParamMap from './models/DocParamMap.js';\n\n\nclass Fretboard extends React.Component {\n  constructor(props) {\n    super(props);\n    const guitarState = new GuitarState();\n\n    let urlParams = new DocParamMap();\n    let keyName = urlParams.getValue(\"key\");\n    let key = keyName && Utils.KEYS[keyName] ? Utils.KEYS[keyName] : Utils.KEYS.C_MAJOR;\n\n    \n    let savedScales = urlParams.getValues(\"s\");\n    if (savedScales && savedScales.length > 0) {\n      for (let i = 0; i < savedScales.length; i += 1) {\n        if (savedScales[i]) {\n          let args = savedScales[i].split(\".\");\n          if (args.length === 3) {\n            let stringNum = Number.parseInt(args[0]);\n            let fretNum = Number.parseInt(args[1]);\n            let positionNum = Number.parseInt(args[2]);\n\n            let scalePattern = guitarState.createScalePatternAt(stringNum, fretNum);\n            let positions = Utils.getPositionsForString(stringNum);\n            if (positionNum < positions.length) {\n              scalePattern.setPosition(positions[positionNum]);\n            }\n\n            //console.log(\"Loading Scale \", scalePattern);\n          }\n        }\n      }\n    }\n    \n    let p = urlParams.getValuesAsInts(\"p\", []);\n    this.state = {\n      key: key,\n      scales: guitarState.scales,\n      guitarState: guitarState,\n      progression: p,\n      bpm: urlParams.getValueAsInt(\"bpm\", 60),\n      bpb: urlParams.getValueAsInt(\"bpb\", 4),\n      tpb: urlParams.getValueAsInt(\"tpb\", 2),\n      volume: urlParams.getValueAsInt(\"v\", 6)\n    };\n  }\n\n  onBeatStop() {\n    this.state.guitarState.setActiveScale(undefined);\n    this.reloadGuitarState();\n  }\n\n  onBeatChange(beat) {\n    let scales = this.state.guitarState.scalePatterns;\n    let idx = beat.getBar();\n    // console.log(\"Bar = \" + beat.getBar() + \" Idx=\" + idx);\n    let active = scales[idx % scales.length];\n    this.state.guitarState.setActiveScale(active);\n    this.reloadGuitarState();\n  }\n\n  reloadGuitarState() {\n    this.setState({\n      guitarState: this.state.guitarState\n    });\n  }\n\n  /** change the key (notes that are highlighted) */\n  updateKey(newKey) {\n    this.setState({\n      key: newKey\n    })\n  }\n\n  /** delete a scale from the table */\n  deleteScale(scale) {\n    this.state.guitarState.deleteScalePattern(scale);\n    this.reloadGuitarState();\n  }\n\n  /** chnage the position for a eventScale position */\n  updatePosition(scale, newPosition) {\n    console.log(\"Swap Position\", newPosition, scale);\n    scale.setPosition(newPosition);\n    this.reloadGuitarState();\n  }\n\n  addToProgression(scale) {\n    let rowNum = this.state.guitarState.getRowNumberForScale(scale);\n    if (rowNum >= 0) {\n      let progression = this.state.progression;\n      progression[progression.length] = rowNum;\n      this.setState({\n        progression: progression\n      });\n    }\n  }\n\n\n  /** add a new ScalePattern when click on bottom 3 strings */\n  onNoteClick(toneState) {\n    let newScale = this.state.guitarState.createScalePatternAt(toneState.stringNumber, toneState.fret);\n    console.log(\"Scale Added\", newScale);\n    this.reloadGuitarState();\n  }\n\n  /** click on/off a particalur scale */\n  onCheck(scale) {\n    scale.enabled = !scale.enabled;\n    this.setState({\n       scales: this.state.scales\n    });\n  }\n\n  render() {\n    const fretCount = this.state.guitarState.strings[0].tones.length;\n    const allKeys = Object.values(Utils.KEYS);\n\n    const fretMarkers = [];\n    for(let i=0; i < fretCount; i++) {\n      let dots = \"\";\n      if (i === 3 || i === 5 || i === 7 || i === 9 || i === 15 || i === 17 || i === 19 || i === 21) {\n        dots += 'â—';\n      } else if (i === 12) {\n        dots += 'â—â—';\n      }\n\n      fretMarkers.push((<div key={\"fretMarker\" + i} className=\"fret-marker\">{dots}</div>));\n    }\n\n    let scales = this.state.guitarState.scalePatterns;\n    \n    return (\n      <div>\n        <div className=\"keySelector\">\n            <SelectBox \n               key=\"keySelector\"\n               label=\"Key\" \n               onChange={(e) => this.updateKey(e)}\n               options={allKeys}\n               value={this.state.key} />\n\n            <Metronome scales={scales} \n               bpb={this.state.bpb} \n               bpm={this.state.bpm}\n               tpb={this.state.tpb}\n               volume={this.state.volume}\n               progression={this.state.progression} \n               onBeatChange={(beat) => this.onBeatChange(beat)}\n               onStop={() => this.onBeatStop()}\n               />\n        </div>\n        \n        <div className=\"fret-board\">{\n          this.state.guitarState.strings.map((stringState) => {\n            return (\n                  <GuitarString \n                      key={stringState.uid}\n                      musicKey={this.state.key} \n                      value={stringState} \n                      onClick={(g,f,n) => this.onNoteClick(g, f, n)} \n                      scales={scales}\n                  />\n            )})\n        }\n          <div className=\"fret-markers\">{fretMarkers}</div>\n        </div>\n        \n        <div className=\"scaleTable\">\n          <div>\n            <div>Color</div>\n            <div>Root</div>\n            <div>Position</div>\n            <div>...</div>\n          </div>\n          {\n            scales.map((item) => (\n              <Scale key={item.uid}\n                onDelete={(e) => this.deleteScale(e)}\n                onChange={(scale, newPosition) => this.updatePosition(scale, newPosition)}\n                onCheck={(s) => this.onCheck(s)}\n                addToProgression={(scale) => this.addToProgression(scale)}\n                value={item} />\n          ))\n        }</div>\n      </div>\n    );\n  }\n}\n\n\nexport default Fretboard;\n","import './css/App.css';\nimport Fretboard from './Fretboard.js';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Fretboard key=\"fretboard\"/>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}