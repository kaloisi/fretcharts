(this.webpackJsonpfretcharts=this.webpackJsonpfretcharts||[]).push([[0],{14:function(t,e,n){},15:function(t,e,n){},16:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var s=n(3),i=n.n(s),r=n(9),a=n.n(r),o=(n(14),n(15),n(1)),c=n(2),u=n(5),l=n(4),h=(n(16),n(7)),b=n(0),p=50,f=50,d=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var s;return Object(o.a)(this,n),(s=e.call(this,t)).state={toneState:t.value},s.select=s.select.bind(Object(h.a)(s)),s}return Object(c.a)(n,[{key:"select",value:function(t){t.stopPropagation(),t.preventDefault(),this.props.onClick(this.props.value)}},{key:"cacluatePointOnCircle",value:function(t,e){var n=t*(Math.PI/180);return{x:Math.cos(n)*e,y:Math.sin(n)*e}}},{key:"createLinesAlongCurve",value:function(t,e,n){for(var s="M "+p+" "+(this.props.scales.length>1?f:f-n)+" \n",i=t;i<e+5;i+=5){var r=Math.min(i,e),a=this.cacluatePointOnCircle(r,n);s+=" L "+(p+a.x)+" "+(f+a.y)+" \n"}return s+" z"}},{key:"createPath",value:function(){}},{key:"render",value:function(){var t=this,e=this.props.scales.length,n=this.props.isInKey?"black":"#ccc",s=e>0?360/e:0,i=this.state.toneState.usedIn.size>0,r=0;return Object(b.jsx)("div",{id:this.props.id,onClick:this.select,className:"note",children:Object(b.jsxs)("svg",{children:[this.props.scales.map((function(e){r+=1;var n=t.state.toneState.isUsedInScale(e);if(i&&n){var a=t.state.toneState.getIntervalLabel(e),o=(r-1)*s-90,c=r*s-90,u=t.cacluatePointOnCircle((c+o)/2,30);return Object(b.jsxs)("g",{children:[Object(b.jsx)("path",{fill:e.color,opacity:e.enabled?1:.25,stroke:"black",d:t.createLinesAlongCurve(o,c,40)}),Object(b.jsx)("text",{x:p+u.x,y:f+u.y,fontSize:"16",stroke:e.enabled?"white":"black",dominantBaseline:"central",textAnchor:"middle",children:a})]},t.props.id+"."+r)}return"<path />"})),Object(b.jsx)("circle",{cx:p,cy:f,r:40/3,stroke:"black",strokeWidth:"1",fill:"#ccc"},this.props.id+"circle"),Object(b.jsx)("text",{x:p,y:f,fill:n,fontSize:"20",dominantBaseline:"central",textAnchor:"middle",children:this.props.value.name},this.props.id+"text")]})},this.props.id)}}]),n}(i.a.Component),v=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var s;return Object(o.a)(this,n),(s=e.call(this,t)).state={stringState:t.value},s}return Object(c.a)(n,[{key:"render",value:function(){for(var t=this,e=[],n=function(){var n=t.state.stringState.tones[s],i=t.props.musicKey.tones.find((function(t){return t===n.name}));e.push(Object(b.jsx)(d,{onClick:t.props.onClick,isInKey:i,scales:t.props.scales,value:n},n.uid))},s=0;s<this.state.stringState.tones.length;s++)n();return Object(b.jsx)("div",{className:"string",children:e})}}]),n}(i.a.Component),g=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var s;return Object(o.a)(this,n),(s=e.call(this,t)).state={value:t.value},s}return Object(c.a)(n,[{key:"selectOption",value:function(t){var e=this.props.options.find((function(e){return e.name===t.target.value}));this.setState({value:e}),this.props.onChange(e)}},{key:"render",value:function(){var t=this,e=[];return this.props.options.forEach((function(t){e.push(Object(b.jsx)("option",{children:t.name},t.name))})),Object(b.jsxs)("div",{className:"selectBox",children:[Object(b.jsx)("select",{onChange:function(e){return t.selectOption(e)},defaultValue:this.state.value.name,children:e}),Object(b.jsx)("div",{className:"selectBoxLabel",children:this.props.label})]})}}]),n}(i.a.Component),m=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],O=[0,2,4,5,7,9,11],j=[0,2,3,5,7,8,10],S=function(t,e,n){var s=[];return n.forEach((function(t){s.push(m[(e+t)%m.length])})),{name:t,startingSemitone:e,semitones:n,tones:s}},N={TONES:m,COLORS:{red:{r:255,g:0,b:0},blue:{r:0,g:0,b:255},green:{r:0,g:255,b:0}},KEYS:{C_MAJOR:S("C-Major",0,O),C_MINOR:S("C-Minor",0,j),D_MAJOR:S("D-Major",2,O),D_MINOR:S("D-Minor",2,j),E_MAJOR:S("E-Major",4,O),E_MINOR:S("E-Minor",4,j),F_MAJOR:S("F-Major",5,O),F_MINOR:S("F-Minor",5,j),G_MAJOR:S("G-Major",7,O),G_MINOR:S("G-Minor",7,j),A_MAJOR:S("A-Major",9,O),A_MINOR:S("A-Minor",9,j),B_MAJOR:S("B-Major",11,O),B_MINOR:S("B-Minor",11,j)},POSITIONS:{FIRST:{rootStringNumber:4,positionName:"1st",name:"1st - Scale",abr:"",fretOffsets:[[-3,-2,0],[-3,-2,0],[-3,-1],[-3,-1,0],[-3,-1,0],[-3,-2,0]],intervals:[["3","4","5"],["7","1","2"],["5","6"],["2","3","4"],["6","7","1"],["3","4","5"]]},FIRST_MAJOR_ARPPEGIO:{rootStringNumber:4,name:"1st - Major Triad Arpeggio",positionName:"1st",abr:"maj",fretOffsets:[[-3,0],[-2],[-3],[-1],[0],[-3,0]],intervals:[["3","5"],["1"],["5"],["3"],["1"],["3","5"]]},FIRST_MAJOR_7_ARPPEGIO:{rootStringNumber:4,name:"1st - Major 7 Arpeggio",positionName:"1st",abr:"maj7",fretOffsets:[[-3,0],[-3,-2],[-3],[-1],[-1,0],[-3,0]],intervals:[["3","5"],["7","1"],["5"],["3"],["7","1"],["3","5"]]},FIRST_DOM_7_ARPPEGIO:{rootStringNumber:4,positionName:"1st",name:"1st - Dom 7 Arpeggio",abr:"dom7",fretOffsets:[[-3,0],[-2],[-3,0],[-1],[-2,0],[-3,0]],intervals:[["3","5"],["1"],["5","b7"],["3"],["b7","1"],["3","5"]]},FIRST_MINOR_ARPPEGIO:{rootStringNumber:4,positionName:"1st",name:"1st - Minor Triad Arpeggio",abr:"min7",fretOffsets:[[0],[-2,1],[-3],[-2],[0],[0]],intervals:[["5"],["1","b3"],["5"],["b3"],["1"],["5"]]},FIRST_MINOR_7_ARPPEGIO:{rootStringNumber:4,positionName:"1st",name:"1st - Minor 7 Arpeggio",abr:"min7",fretOffsets:[[0],[-2,1],[-3,0],[-2],[-2,0],[0]],intervals:[["5"],["1","b3"],["5","b7"],["b3"],["b7","1"],["5"]]},FIRST_MAJOR_PENTA:{rootStringNumber:4,positionName:"1st",name:"1st - Pentatonic (Major)",abr:"maj",fretOffsets:[[-3,0],[-2,0],[-3,-1],[-3,-1],[-3,0],[-3,0]],intervals:[["3","5"],["1","2"],["5","6"],["2","3"],["6","1"],["3","5"]]},FIRST_MINOR_PENTA:{rootStringNumber:4,positionName:"1st",name:"1st - Pentatonic (Minor)",abr:"min",fretOffsets:[[-2,0],[-2,1],[-3,0],[-2,0],[-2,0],[-2,0]],intervals:[["4","5"],["1","b3"],["5","b7"],["b3","4"],["b7","1"],["4","5"]]},SECOND:{rootStringNumber:4,positionName:"2nd",name:"2nd - Scale",abr:"",fretOffsets:[[0,2,4],[0,2,3],[-1,1,2],[-1,0,2],[-1,0,2],[0,2]],intervals:[["5","6","7"],["2","3","4"],["6","7","1"],["3","4","5"],["7","1","2"],["5","6"]]},SECOND_MAJOR_TRIAD_ARPEGGIO:{default:!1,rootStringNumber:4,positionName:"2nd",name:"2nd - Major Triad Arpeggio",abr:"maj",fretOffsets:[[0],[2],[2],[-1,2],[0],[0]],intervals:[["5"],["3"],["1"],["3","5"],["1"],["5"]]},SECOND_MAJOR_7_ARPEGGIO:{default:!0,rootStringNumber:4,positionName:"2nd",name:"2nd - Major 7 Arpeggio",abr:"maj7",fretOffsets:[[0,4],[2],[1,2],[-1,2],[-1,0],[0]],intervals:[["5","7"],["3"],["7","1"],["3","5"],["7","1"],["5"]]},SECOND_DOM_7_ARPEGGIO:{rootStringNumber:4,positionName:"2nd",name:"2nd - Dom 7 Arpeggio",abr:"dom7",fretOffsets:[[0,3],[2],[0,2],[-1,2],[0],[0,3]],intervals:[["5","b7"],["3"],["b7","1"],["3","5"],["1"],["5","b7"]]},SECOND_MINOR_TRIAD_ARPEGGIO:{rootStringNumber:4,positionName:"2nd",name:"2nd - Minor Triad Arpeggio",abr:"min",fretOffsets:[[0],[1],[2],[2],[0,3],[0]],intervals:[["5"],["b3"],["1"],["5"],["1","b3"],["5"]]},SECOND_MINOR_7_ARPEGGIO:{rootStringNumber:4,positionName:"2nd",name:"2nd - Minor 7 Arpeggio",abr:"min7",fretOffsets:[[0,3],[1],[0,2],[2],[0,3],[0,3]],intervals:[["5","b7"],["b3"],["b7","1"],["5"],["1","b3"],["5","b7"]]},SECOND_MINOR_7_B5_ARPEGGIO:{rootStringNumber:4,positionName:"2nd",name:"2nd - Minor 7 b5 Arpeggio",abr:"min7b5",fretOffsets:[[-1,3],[1],[0,2],[1],[0,3],[-1,3]],intervals:[["b5","b7"],["b3"],["b7","1"],["b5"],["1","b3"],["b5","b7"]]},SECOND_MAJOR_PENTA:{rootStringNumber:4,positionName:"2nd",name:"2nd - Pentatonic (Major)",abr:"maj",fretOffsets:[[0,2],[0,2],[-1,2],[-1,2],[0,2],[0,2]],intervals:[["2","6"],["3","3"],["6","1"],["3","5"],["1","2"],["5","6"]]},SECOND_MINOR_PENTA:{rootStringNumber:4,positionName:"2nd",name:"2nd - Pentatonic (Minor)",abr:"min",fretOffsets:[[0,3],[1,3],[0,2],[0,2],[0,3],[0,3]],intervals:[["5","b7"],["b3","4"],["b7","1"],["4","5"],["1","b3"],["5","b7"]]},THIRD:{rootStringNumber:5,positionName:"3rd",name:"3rd - Scale",abr:"",fretOffsets:[[-3,-1,0],[-3,-2,0],[-4,-3,-1],[-3,-1],[-3,-1,0],[-3,-1,0]],intervals:[["6","7","1"],["3","4","5"],["7","1","2"],["5","6"],["2","3","4"],["6","7","1"]]},THIRD_MAJOR_7_ARPEGGIO:{rootStringNumber:5,positionName:"3rd",name:"3rd - Major 7 Arpeggio",abr:"maj7",fretOffsets:[[-1,0],[-3,0],[-4,-3],[-3],[-1],[-1,0]],intervals:[["7","1"],["3","5"],["7","1"],["5"],["3"],["7","1"]]},THIRD_DOM_7_ARPEGGIO:{rootStringNumber:5,positionName:"3rd",name:"3rd - Dom 7 Arpeggio",abr:"dom7",fretOffsets:[[-2,0],[-3,0],[-3],[-3,0],[-1],[-2,0]],intervals:[["b7","1"],["3","5"],["1"],["5","b7"],["3"],["b7","1"]]},THIRD_MINOR_7_ARPEGGIO:{rootStringNumber:5,positionName:"3rd",name:"3rd - Minor 7 Arpeggio",abr:"min7",fretOffsets:[[-2,0],[0],[-3,0],[-3,0],[-2],[-2,0]],intervals:[["b7","1"],["5"],["1","b3"],["5","b7"],["b3"],["b7","1"]]},THRID_MAJOR_PENTA:{rootStringNumber:5,positionName:"3rd",name:"3rd - Pentatonic (Major)",abr:"maj",fretOffsets:[[-3,0],[-3,0],[-3,-1],[-3,-1],[-3,-1],[-3,0]],intervals:[["6","1"],["3","5"],["1","2"],["5","6"],["2","3"],["4","1"]]},THIRD_MINOR_PENTA:{rootStringNumber:5,positionName:"3rd",name:"3rd - Pentatonic (Minor)",abr:"dom",fretOffsets:[[-2,0],[-2,0],[-3,0],[-3,0],[-2,0],[-2,0]],intervals:[["b7","1"],["4","5"],["1","3"],["5","b7"],["b3","4"],["b7","1"]]},FORTH:{rootStringNumber:5,positionName:"4th",name:"4th - Scale",abr:"",fretOffsets:[[-1,0,2],[0,2],[-1,1,2],[-1,1,2],[-1,0,2],[-1,0,2]],intervals:[["7","1","2"],["5","6"],["2","3","4"],["6","7","1"],["3","4","5"],["7","1","2"]]},FORTH_MAJOR_7_ARPEGGIO:{default:!0,rootStringNumber:5,positionName:"4th",name:"4th - Major 7 Arpeggio",abr:"maj7",fretOffsets:[[-1,0],[0],[1],[1,2],[-1,2],[-1,0]],intervals:[["7","1"],["5"],["3"],["7","1"],["3","5"],["7","1"]]},FORTH_DOM_7_ARPEGGIO:{rootStringNumber:5,positionName:"4th",name:"4th - Dom 7 Arpeggio",abr:"7",fretOffsets:[[0],[0,3],[1],[0,2],[-1,2],[0]],intervals:[["1"],["5","b7"],["3"],["b7","1"],["3","5"],["1"]]},FORTH_MINOR_7_ARPEGGIO:{rootStringNumber:5,positionName:"4th",name:"4th - Minor 7 Arpeggio",abr:"min7",fretOffsets:[[0,3],[0,3],[0],[0,2],[2],[0,3]],intervals:[["1","b3"],["5","b7"],["b3"],["b7","1"],["5"],["1","b3"]]},FORTH_MINOR_PENTA:{rootStringNumber:5,positionName:"4th",name:"4th - Pentatonic (Minor)",abr:"min",fretOffsets:[[0,3],[0,3],[0,2],[0,2],[0,2],[0,3]],intervals:[["1","b3"],["5","b7"],["b3","4"],["b7","1"],["4","5"],["1","b3"]]},FIFTH_MAJOR_7_SCALE:{rootStringNumber:3,positionName:"5th",name:"5th - Major 7 Scale",abr:"maj7",fretOffsets:[[0,2,3],[0,2,3],[-1,0,2],[-1,0,2],[0,2],[0,2,3]],intervals:[["2","3","4"],["6","7","1"],["3","4","5"],["7","1","2"],["5","6"],["2","3","4"]]},FIFTH_MAJOR_7_ARPEGGIO:{default:!0,rootStringNumber:3,positionName:"5th",name:"5th - Major 7 Arpeggio",abr:"maj7",fretOffsets:[[2],[2,3],[-1,2],[-1,0],[0],[2]],intervals:[["3"],["7","1"],["3","5"],["7","1"],["5"],["3"]]},FIFTH_DOM_7_ARPEGGIO:{rootStringNumber:3,positionName:"5th",name:"5th - Dom 7 Arpeggio",abr:"7",fretOffsets:[[2],[1,3],[-1,2],[0],[0,3],[2]],intervals:[["3"],["b7","1"],["3","5"],["1"],["5","b7"],["3"]]},FIFTH_MINOR_7_ARPEGGIO:{rootStringNumber:3,positionName:"5th",name:"5th - Minor 7 Arpeggio",abr:"min7",fretOffsets:[[1],[1,3],[2],[0,3],[0,3],[2]],intervals:[["b3"],["b7","1"],["5"],["1","b3"],["5","b7"],["b3"]]},FIFTH_MAJOR_PENTA:{rootStringNumber:3,positionName:"5th",name:"5th - Pentatonic (Major)",abr:"maj",fretOffsets:[[0,2],[0,3],[-1,2],[0,2],[0,2],[0,2]],intervals:[["2","3"],["6","1"],["3","5"],["1","2"],["5","6"],["2","3"]]},FIFTH_MINOR_PENTA:{rootStringNumber:3,positionName:"5th",name:"5th - Pentatonic (Minor)",abr:"-",fretOffsets:[[1,3],[1,3],[0,2],[0,3],[0,3],[1,3]],intervals:[["b3","4"],["b7","1"],["4","5"],["1","b3"],["5","b7"],["b3","4"]]}},resolveNotesForScale:function(t,e,n){for(var s=new Map,i=n.fretOffsets,r=n.intervals,a=0;a<i.length;a+=1)for(var o=i[a],c=0;c<o.length;c+=1){var u=t.getNoteAt(a,e+o[c]);u&&s.set(u,r?r[a][c]:"?")}return s},getPositionsForString:function(t){return Object.values(this.POSITIONS).filter((function(e){return e.rootStringNumber===t}))},getDefaultPositionForString:function(t){var e=this.getPositionsForString(t);return void 0===e||e.length<1?[]:e.find((function(t){return!0===t.default}))}},k=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"delete",value:function(){this.props.onDelete&&this.props.onDelete(this.props.value)}},{key:"select",value:function(t){this.props.onChange&&this.props.onChange(this.props.value,t)}},{key:"onCheck",value:function(t){this.props.onCheck&&this.props.onCheck(this.props.value)}},{key:"addToProgression",value:function(){this.props.addToProgression&&this.props.addToProgression(this.props.value)}},{key:"render",value:function(){var t=this,e="https://onlineguitarbooks.com/"+this.props.value.name+"-chord/",n={backgroundColor:this.props.value.color},s=N.getPositionsForString(this.props.value.toneState.stringNumber);return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{style:n}),Object(b.jsxs)("div",{children:[Object(b.jsx)("input",{type:"checkbox",checked:this.props.value.enabled,onChange:function(e){return t.onCheck(e)}}),Object(b.jsxs)("a",{href:e,target:"_blank",rel:"noreferrer",children:[this.props.value.name," (",this.props.value.toneState.stringNumber+1,", ",this.props.value.toneState.fret,")"]})]}),Object(b.jsx)("div",{children:Object(b.jsx)(g,{value:this.props.value.position,options:s,onChange:function(e){return t.select(e)}})}),Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{onClick:function(e){return t.delete()},children:"delete"}),Object(b.jsx)("button",{onClick:function(e){return t.addToProgression()},children:"add to chord progression"})]})]})}}]),n}(i.a.Component),A=k,y=["#4E79A5","#F18F3B","#E0585B","#77B7B2","#5AA155","#EDC958","#AF7AA0","#FE9EA8","#9C7561","#BAB0AC"],P=function(){function t(e,n,s,i){Object(o.a)(this,t),this.uid=e,this.name=n,this.stringNumber=s,this.fret=i,this.usedIn=new Map,this.position=0===i?"Open "+n:n+" "+(s+1)+" @ "+i}return Object(c.a)(t,[{key:"add",value:function(t,e){this.usedIn.set(t.uid,e)}},{key:"remove",value:function(t){this.usedIn.delete(t.uid)}},{key:"isUsedInScale",value:function(t){return this.usedIn.has(t.uid)}},{key:"getIntervalLabel",value:function(t){return this.usedIn.get(t.uid)}}]),t}(),x=function(){function t(e,n){Object(o.a)(this,t),this.name=N.TONES[e],this.uid="string-"+this.name+"-"+n,this.intervalOffset=e,this.tones=[];for(var s=0;s<17;s++){var i=e+s,r=N.TONES[i%N.TONES.length];this.tones.push(new P(this.uid+"."+s,r,n,s))}}return Object(c.a)(t,[{key:"getNoteAt",value:function(t){return t>=0&&t<this.tones.length?this.tones[t]:void 0}}]),t}(),M=function(){function t(e,n,s,i,r,a){Object(o.a)(this,t),this.guitarState=e,this.uid="scale."+s+"."+i+"."+r,this.name=n.name,this.fret=n.fret,this.fretNum=i,this.toneState=n,this.scale=N.KEYS.C_MAJOR,this.color=a,this.enabled=!0,this.setPosition(N.getDefaultPositionForString(s))}return Object(c.a)(t,[{key:"setPosition",value:function(t){var e=this;if(this.toneStates&&this.toneStates.length>0)for(var n=0;n<this.toneStates.length;n+=1){this.toneStates[n].remove(this)}if(this.position=t,t){var s=N.resolveNotesForScale(this.guitarState,this.fretNum,this.position);this.toneStates=[],s.forEach((function(t,n){n.add(e,t),e.toneStates.push(n)}))}}}]),t}(),I=function(){function t(){Object(o.a)(this,t),this.strings=[],this.strings.push(new x(4,0)),this.strings.push(new x(11,1)),this.strings.push(new x(7,2)),this.strings.push(new x(2,3)),this.strings.push(new x(9,4)),this.strings.push(new x(4,5)),this.scalePatterns=[]}return Object(c.a)(t,[{key:"setActiveScale",value:function(t){for(var e=0;e<this.scalePatterns.length;e+=1){var n=this.scalePatterns[e];n.enabled=!t||n===t}}},{key:"deleteScalePattern",value:function(t){t.setPosition(void 0),this.scalePatterns=this.scalePatterns.filter((function(e){return e!==t}))}},{key:"createScalePatternAt",value:function(t,e){var n=this.getNoteAt(t,e);if(n){var s=this.scalePatterns.length,i=new M(this,n,t,e,s,y[s%y.length]);return this.scalePatterns.push(i),i}}},{key:"getNoteAt",value:function(t,e){var n=this.strings[t];return n?n.getNoteAt(e):void 0}},{key:"getRowNumberForScale",value:function(t){return this.scalePatterns.indexOf(t)}}]),t}(),_=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"getScales",value:function(){for(var t=[],e=this.props.scales,n=this.props.progression,s=0;s<n.length;s+=1){var i=n[s];if(i<e.length){var r=e[i];t[t.length]=r}}return t}},{key:"renderProgression",value:function(){var t=this,e=this.getScales(),n=this.props.beat,s=n?n.getBar()%e.length:void 0;return e.map((function(e,n){var i=n===s,r={backgroundColor:e.color,opacity:i?1:.25},a="";if(i)for(var o=t.props.count%t.props.bpb+1,c=0;c<o;c+=1)a+=".";return Object(b.jsxs)("div",{className:"pill",style:r,children:[e.name+e.position.abr," ",a]},"c"+n)}))}},{key:"render",value:function(){return Object(b.jsx)("div",{className:"chordProgressions",children:Object(b.jsx)("div",{className:"progressions",children:this.renderProgression()})},"progression")}}]),n}(i.a.Component),R=_,T=[[],[],["","-AND"],["","-TRIP","-LET"],["","-E","-AND","-UH"]],C=function(){function t(e,n,s){Object(o.a)(this,t),this.tickCount=0,this.beatPerMinute=e,this.beatsPerBar=n,this.ticksPerBeat=s}return Object(c.a)(t,[{key:"getTicksPerBeat",value:function(){return this.ticksPerBeat}},{key:"tick",value:function(){this.tickCount+=1}},{key:"toString",value:function(){var t=this.getBeat(),e=this.getTick();return 0===e?t:this.getTickLabels(e)}},{key:"getTick",value:function(){return this.tickCount%this.ticksPerBeat}},{key:"getTickLabel",value:function(t){return 0===t?this.getBeat()+1:T[this.ticksPerBeat][t]}},{key:"getBeat",value:function(){return Math.floor(this.tickCount/this.ticksPerBeat)%this.beatsPerBar}},{key:"getBar",value:function(){return Math.floor(this.tickCount/this.ticksPerBeat/this.beatsPerBar)}}]),t}();var E=function(){function t(e,n){var s=this;Object(o.a)(this,t),this.name=e,this.files={},Object.keys(n).forEach((function(t){s.addFile(t,n[t])}))}return Object(c.a)(t,[{key:"addFile",value:function(t,e){var n=this;this.files[t]=void 0,function(t,e){var n=new(window.AudioContext||window.webkitAudioContext),s=new XMLHttpRequest;s.open("GET","/fretcharts/mp3/"+t+".mp3",!0),s.responseType="arraybuffer",s.onload=function(){try{if(200===s.status){var i=s.response;console.log("Media Loaded: ",s),n.decodeAudioData(i,(function(n){console.log("Buffer Loaded",n),e(t,n)}),(function(t){console.log("Error",t)}))}else console.log("Media Load Failed "+this.response.status)}catch(r){console.log("Error",r)}},s.send()}(e,(function(e,s){n.files[t]=s;for(var i=Object.keys(n.files),r=0;r<i.length;r++)if(!i[r])return}))}},{key:"getAudioFile",value:function(t){return this.files[t]}}]),t}(),F=Array.of(new E("Snoop",{1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight","-E":"eee","-AND":"and","-UH":"uh","-TRIP":"trip","-LET":"let"}),new E("Snare",{1:"snare",2:"snare",3:"snare",4:"snare",5:"snare",6:"snare",7:"snare",8:"snare","-E":"snare","-AND":"snare","-UH":"snare","-TRIP":"snare","-LET":"snare"})),B=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var s;return Object(o.a)(this,n),(s=e.call(this,t)).state={bpm:s.props.bpm,bpb:s.props.bpb,tpb:s.props.tpb,swing:2!==s.props.tpb&&void 0,volume:s.props.volume,playing:!1,interval:null,beat:void 0,audioCtx:void 0,audioOut:void 0,audioFiles:F[0]},s}return Object(c.a)(n,[{key:"beep",value:function(){try{var t=this.state.audioCtx;void 0===t&&(t=new(window.AudioContext||window.webkitAudioContext));var e=t.createBufferSource(),n=this.state.audioOut;n||(n=t.createGain()).connect(t.destination);var s=this.state.beat;s?s.tick():s=new C(this.state.bpm,this.state.bpb,this.state.tpb);var i=this.state.volume;0===s.getTick()?0!==s.getBeat()&&(i/=2):i/=4,n.gain.value=i/10,e.buffer=this.state.audioFiles.getAudioFile(s.getTickLabel(s.getTick())),e.connect(n),e.start(),this.props.onBeatChange&&this.props.onBeatChange(s),this.setState({beat:s,audioOut:n,audioCtx:t})}catch(r){console.log("Error",r)}}},{key:"doneLoading",value:function(){console.log("Done Loading")}},{key:"getNextTickInMs",value:function(){var t=6e4/this.state.bpm;return 2===this.state.tpb&&this.state.swing&&this.state.beat?0===this.state.beat.getTick()?t*=.75:t*=.25:t/=this.state.tpb,t}},{key:"scheduleTick",value:function(t,e){var n=this;if(e||this.beep(),t){var s=this.getNextTickInMs();setTimeout((function(){return n.scheduleTick(n.state.playing)}),s)}}},{key:"startStop",value:function(){var t=!this.state.playing;!t&&this.props.onStop&&this.props.onStop(),t&&this.scheduleTick(t,!0),this.setState({beat:void 0,playing:t})}},{key:"setBpm",value:function(t){var e=Number.parseInt(t.target.value);this.setState({bpm:e}),console.log("BPM = "+e)}},{key:"setBpb",value:function(t){this.setState({bpb:Number.parseInt(t.target.value)})}},{key:"setTpb",value:function(t){var e=Number.parseInt(t.target.value),n=2!==e&&void 0;console.log("New Tpb="+e+" "+n),this.setState({tpb:e,swing:n})}},{key:"setVolume",value:function(t){this.setState({volume:Number.parseInt(t.target.value)})}},{key:"setSwing",value:function(t){this.setState({swing:t.target.value})}},{key:"setAudioFiles",value:function(t){this.setState({audioFiles:F[t.target.value]})}},{key:"renderTicks",value:function(){var t=[],e=this.state.beat;if(e)for(var n=0;n<e.getTicksPerBeat();n+=1){var s=e.getTick()===n?"counterOn":"counterOff";t.push(Object(b.jsx)("div",{className:s,children:e.getTickLabel(n)},"r"+n))}return t}},{key:"render",value:function(){var t=this;return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"metronome",children:[Object(b.jsx)("input",{type:"number",min:1,max:4,size:6,maxLength:6,defaultValue:this.state.tpb,onChange:function(e){return t.setTpb(e)}}),Object(b.jsx)("div",{className:"label",children:"Tick per beat"}),Object(b.jsx)("input",{type:"checkbox",defaultValue:this.state.swing,disabled:void 0===this.state.swing,onChange:function(e){return t.setSwing(e)}}),Object(b.jsx)("div",{className:"label",children:"Swing"}),Object(b.jsx)("input",{type:"number",min:2,max:8,size:6,maxLength:6,defaultValue:this.state.bpb,onChange:function(e){return t.setBpb(e)}}),Object(b.jsx)("div",{className:"label",children:"Beats per bar"}),Object(b.jsx)("input",{type:"number",min:1,max:200,size:6,maxLength:6,defaultValue:this.state.bpm,onChange:function(e){return t.setBpm(e)}}),Object(b.jsx)("div",{className:"label",children:"Beats per minute"}),Object(b.jsx)("select",{onChange:function(e){return t.setAudioFiles(e)},children:F.map((function(t,e){return Object(b.jsx)("option",{value:e,children:t.name})}))}),Object(b.jsx)("div",{className:"label",children:"Tones"}),Object(b.jsxs)("select",{defaultValue:this.state.volume,onChange:function(e){return t.setVolume(e)},children:[Object(b.jsx)("option",{children:"1"}),Object(b.jsx)("option",{children:"2"}),Object(b.jsx)("option",{children:"3"}),Object(b.jsx)("option",{children:"4"}),Object(b.jsx)("option",{children:"5"}),Object(b.jsx)("option",{children:"6"}),Object(b.jsx)("option",{children:"7"}),Object(b.jsx)("option",{children:"8"}),Object(b.jsx)("option",{children:"9"}),Object(b.jsx)("option",{children:"10"})]}),Object(b.jsx)("div",{className:"label",children:"Volume"}),Object(b.jsx)("button",{onClick:function(e){return t.startStop()},children:this.state.playing?"Stop":"Play"}),Object(b.jsxs)("div",{className:"counter",children:[" ",this.state.beat&&this.renderTicks()," "]})]}),Object(b.jsx)(R,{scales:this.props.scales,progression:this.props.progression,beat:this.state.beat,bpb:this.state.bpb,bpm:this.state.bpm})]})}}]),n}(i.a.Component),G=function(){function t(){Object(o.a)(this,t);var e={},n=document.location.search;if(n&&n.length>1){"?"===n.charAt(0)&&(n=n.substring(1));for(var s=n.split("&"),i=0;i<s.length;i++){var r=s[i].split("=");if(r&&2===r.length){var a=r[0],c=r[1],u=e[a];void 0===u?e[a]=[c]:u[u.length]=c}}}this.values=e}return Object(c.a)(t,[{key:"getValues",value:function(t,e){return this.values[t]?this.values[t]:e}},{key:"getValue",value:function(t,e){var n=this.getValues(t);return n&&n.length>0?n[0]:e}},{key:"getValueAsInt",value:function(t){var e=this.getValue(t);return e?Number.parseInt(e):void 0}},{key:"getValuesAsInts",value:function(t,e){var n=this.getValues(t);return n?n.map((function(t){return Number.parseInt(t)})):e}}]),t}(),D=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var s;Object(o.a)(this,n),s=e.call(this,t);var i=new I,r=new G,a=r.getValue("key"),c=a&&N.KEYS[a]?N.KEYS[a]:N.KEYS.C_MAJOR,u=r.getValues("s");if(u&&u.length>0)for(var l=0;l<u.length;l+=1)if(u[l]){var h=u[l].split(".");if(3===h.length){var b=Number.parseInt(h[0]),p=Number.parseInt(h[1]),f=Number.parseInt(h[2]),d=i.createScalePatternAt(b,p),v=N.getPositionsForString(b);f<v.length&&d.setPosition(v[f])}}var g=r.getValuesAsInts("p",[]);return s.state={key:c,scales:i.scales,guitarState:i,progression:g,bpm:r.getValueAsInt("bpm",60),bpb:r.getValueAsInt("bpb",4),tpb:r.getValueAsInt("tpb",2),volume:r.getValueAsInt("v",5)},s}return Object(c.a)(n,[{key:"onBeatStop",value:function(){this.state.guitarState.setActiveScale(void 0),this.reloadGuitarState()}},{key:"onBeatChange",value:function(t){var e=this.state.guitarState.scalePatterns,n=e[t.getBar()%e.length];this.state.guitarState.setActiveScale(n),this.reloadGuitarState()}},{key:"reloadGuitarState",value:function(){this.setState({guitarState:this.state.guitarState})}},{key:"updateKey",value:function(t){this.setState({key:t})}},{key:"deleteScale",value:function(t){this.state.guitarState.deleteScalePattern(t),this.reloadGuitarState()}},{key:"updatePosition",value:function(t,e){console.log("Swap Position",e,t),t.setPosition(e),this.reloadGuitarState()}},{key:"addToProgression",value:function(t){var e=this.state.guitarState.getRowNumberForScale(t);if(e>=0){var n=this.state.progression;n[n.length]=e,this.setState({progression:n})}}},{key:"onNoteClick",value:function(t){var e=this.state.guitarState.createScalePatternAt(t.stringNumber,t.fret);console.log("Scale Added",e),this.reloadGuitarState()}},{key:"onCheck",value:function(t){t.enabled=!t.enabled,this.setState({scales:this.state.scales})}},{key:"render",value:function(){for(var t=this,e=this.state.guitarState.strings[0].tones.length,n=Object.values(N.KEYS),s=[],i=0;i<e;i++){var r="";3===i||5===i||7===i||9===i||15===i||17===i||19===i||21===i?r+="\u25cf":12===i&&(r+="\u25cf\u25cf"),s.push(Object(b.jsx)("div",{className:"fret-marker",children:r},"fretMarker"+i))}var a=this.state.guitarState.scalePatterns;return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"keySelector",children:[Object(b.jsx)(g,{label:"Key",onChange:function(e){return t.updateKey(e)},options:n,value:this.state.key},"keySelector"),Object(b.jsx)(B,{scales:a,bpb:this.state.bpb,bpm:this.state.bpm,tpb:this.state.tpb,volume:this.state.volume,progression:this.state.progression,onBeatChange:function(e){return t.onBeatChange(e)},onStop:function(){return t.onBeatStop()}})]}),Object(b.jsxs)("div",{className:"fret-board",children:[this.state.guitarState.strings.map((function(e){return Object(b.jsx)(v,{musicKey:t.state.key,value:e,onClick:function(e,n,s){return t.onNoteClick(e,n,s)},scales:a},e.uid)})),Object(b.jsx)("div",{className:"fret-markers",children:s})]}),Object(b.jsxs)("div",{className:"scaleTable",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{children:"Color"}),Object(b.jsx)("div",{children:"Root"}),Object(b.jsx)("div",{children:"Position"}),Object(b.jsx)("div",{children:"..."})]}),a.map((function(e){return Object(b.jsx)(A,{onDelete:function(e){return t.deleteScale(e)},onChange:function(e,n){return t.updatePosition(e,n)},onCheck:function(e){return t.onCheck(e)},addToProgression:function(e){return t.addToProgression(e)},value:e},e.uid)}))]})]})}}]),n}(i.a.Component);var w=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(D,{},"fretboard")})};a.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(w,{})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.22402c00.chunk.js.map