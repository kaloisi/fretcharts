(this.webpackJsonpgscale=this.webpackJsonpgscale||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n.n(r),i=n(11),o=n.n(i),a=(n(16),n(17),n(2)),c=n(3),l=n(5),u=n(4),f=(n(18),n(7)),h=n(0),b=50,O=50,p=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={toneState:e.value},r.select=r.select.bind(Object(f.a)(r)),r}return Object(c.a)(n,[{key:"select",value:function(e){e.stopPropagation(),e.preventDefault(),this.props.onClick(this.props.value)}},{key:"cacluatePointOnCircle",value:function(e,t){var n=e*(Math.PI/180);return{x:Math.cos(n)*t,y:Math.sin(n)*t}}},{key:"createLinesAlongCurve",value:function(e,t,n){for(var r="M "+b+" "+(this.props.scales.length>1?O:O-n)+" \n",s=e;s<t+5;s+=5){var i=Math.min(s,t),o=this.cacluatePointOnCircle(i,n);r+=" L "+(b+o.x)+" "+(O+o.y)+" \n"}return r+" z"}},{key:"createPath",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.scales.length,n=this.props.isInKey?"white":"#363636",r=t>0?360/t:0,s=this.state.toneState.usedIn.size>0,i=0;return Object(h.jsx)("div",{id:this.props.id,onClick:this.select,className:"note",children:Object(h.jsxs)("svg",{children:[this.props.scales.map((function(t){i+=1;var n=e.state.toneState.isUsedInScale(t);if(s&&t.enabled){var o=e.state.toneState.getIntervalLabel(t),a=(i-1)*r-90,c=i*r-90,l=e.cacluatePointOnCircle((c+a)/2,30);return Object(h.jsxs)("g",{children:[Object(h.jsx)("path",{fill:n?t.color:"transparent",stroke:"black",d:e.createLinesAlongCurve(a,c,40)}),Object(h.jsx)("text",{x:b+l.x,y:O+l.y,fontSize:"16",fill:"white",dominantBaseline:"central",textAnchor:"middle",children:o})]},e.props.id+"."+i)}return"<path />"})),Object(h.jsx)("circle",{cx:b,cy:O,r:40/3,stroke:"black",strokeWidth:"1",fill:"black"},this.props.id+"circle"),Object(h.jsx)("text",{x:b,y:O,fill:n,fontSize:"20",dominantBaseline:"central",textAnchor:"middle",children:this.props.value.name},this.props.id+"text")]})},this.props.id)}}]),n}(s.a.Component),d=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={stringState:e.value},r}return Object(c.a)(n,[{key:"render",value:function(){for(var e=this,t=[],n=function(){var n=e.state.stringState.tones[r],s=e.props.musicKey.tones.find((function(e){return e===n.name})),i=n.uid+"-spacer";t.push(Object(h.jsx)(p,{onClick:e.props.onClick,isInKey:s,scales:e.props.scales,value:n},n.uid)),t.push(Object(h.jsx)("div",{className:"stringSpacer"},i))},r=0;r<this.state.stringState.tones.length;r++)n();return Object(h.jsx)("div",{className:"string",children:t})}}]),n}(s.a.Component),m=(n(20),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={value:e.value},r}return Object(c.a)(n,[{key:"select",value:function(e){var t=this.props.options.find((function(t){return t.name===e.target.value}));this.setState({value:t}),this.props.onChange(t)}},{key:"render",value:function(){var e=this,t=[];return this.props.options.forEach((function(e){t.push(Object(h.jsx)("option",{children:e.name},e.name))})),Object(h.jsxs)("div",{className:"selectBox",children:[Object(h.jsx)("div",{className:"selectBoxLabel",children:this.props.label}),Object(h.jsx)("select",{onChange:function(t){return e.select(t)},defaultValue:this.state.value.name,children:t})]})}}]),n}(s.a.Component)),v=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],g=[0,2,4,5,7,9,11],N=[0,2,3,5,7,8,10],j=function(e,t,n){var r=[];return n.forEach((function(e){r.push(v[(t+e)%v.length])})),{name:e,startingSemitone:t,semitones:n,tones:r}},S={TONES:v,COLORS:{red:{r:255,g:0,b:0},blue:{r:0,g:0,b:255},green:{r:0,g:255,b:0}},KEYS:{C_MAJOR:j("C-Major",0,g),C_MINOR:j("C-Minor",0,N),D_MAJOR:j("D-Major",2,g),D_MINOR:j("D-Minor",2,N),E_MAJOR:j("E-Major",4,g),E_MINOR:j("E-Minor",4,N),F_MAJOR:j("F-Major",5,g),F_MINOR:j("F-Minor",5,N),G_MAJOR:j("G-Major",7,g),G_MINOR:j("G-Minor",7,N),A_MAJOR:j("A-Major",9,g),A_MINOR:j("A-Minor",9,N),B_MAJOR:j("B-Major",11,g),B_MINOR:j("B-Minor",11,N)},POSITIONS:{FIRST:{rootStringNumber:4,positionName:"1st",name:"1st - Scale",fretOffsets:[[-3,-2,0],[-3,-2,0],[-3,-1],[-3,-1,0],[-3,-1,0],[-3,-2,0]],intervals:[["3","4","5"],["7","1","2"],["5","6"],["2","3","4"],["6","7","1"],["3","4","5"]]},FIRST_MAJOR_ARPPEGIO:{rootStringNumber:4,name:"1st - Major Triad Arpeggio",positionName:"1st",fretOffsets:[[-3,0],[-2],[-3],[-1],[0],[-3,0]],intervals:[["3","5"],["1"],["5"],["3"],["1"],["3","5"]]},FIRST_MAJOR_7_ARPPEGIO:{rootStringNumber:4,name:"1st - Major 7 Arpeggio",positionName:"1st",fretOffsets:[[-3,0],[-3,-2],[-3],[-1],[-1,0],[-3,0]],intervals:[["3","5"],["7","1"],["5"],["3"],["7","1"],["3","5"]]},FIRST_DOM_7_ARPPEGIO:{rootStringNumber:4,positionName:"1st",name:"1st - Dom 7 Arpeggio",fretOffsets:[[-3,0],[-2],[-3,0],[-1],[-2,0],[-3,0]],intervals:[["3","5"],["1"],["5","b7"],["3"],["b7","1"],["3","5"]]},FIRST_MINOR_ARPPEGIO:{rootStringNumber:4,positionName:"1st",name:"1st - Minor Triad Arpeggio",fretOffsets:[[0],[-2,1],[-3],[-2],[0],[0]],intervals:[["5"],["1","b3"],["5"],["b3"],["1"],["5"]]},FIRST_MINOR_7_ARPPEGIO:{rootStringNumber:4,positionName:"1st",name:"1st - Minor 7 Arpeggio",fretOffsets:[[0],[-2,1],[-3,0],[-2],[-2,0],[0]],intervals:[["5"],["1","b3"],["5","b7"],["b3"],["b7","1"],["5"]]},FIRST_MAJOR_PENTA:{rootStringNumber:4,positionName:"1st",name:"1st - Pentatonic (Major)",fretOffsets:[[-3,0],[-2,0],[-3,-1],[-3,-1],[-3,0],[-3,0]],intervals:[["3","5"],["1","2"],["5","6"],["2","3"],["6","1"],["3","5"]]},FIRST_MINOR_PENTA:{rootStringNumber:4,positionName:"1st",name:"1st - Pentatonic (Minor)",fretOffsets:[[-2,0],[-2,1],[-3,0],[-2,0],[-2,0],[-2,0]],intervals:[["4","5"],["1","b3"],["5","b7"],["b3","4"],["b7","1"],["4","5"]]},SECOND:{rootStringNumber:4,positionName:"2nd",name:"2nd - Scale",fretOffsets:[[0,2,4],[0,2,3],[-1,1,2],[-1,0,2],[-1,0,2],[0,2]],intervals:[["5","6","7"],["2","3","4"],["6","7","1"],["3","4","5"],["7","1","2"],["5","6"]]},SECOND_MAJOR_TRIAD_ARPEGGIO:{default:!1,rootStringNumber:4,positionName:"2nd",name:"2nd - Major Triad Arpeggio",fretOffsets:[[0],[2],[2],[-1,2],[0],[0]],intervals:[["5"],["3"],["1"],["3","5"],["1"],["5"]]},SECOND_MAJOR_7_ARPEGGIO:{default:!0,rootStringNumber:4,positionName:"2nd",name:"2nd - Major 7 Arpeggio",fretOffsets:[[0,4],[2],[1,2],[-1,2],[-1,0],[0]],intervals:[["5","7"],["3"],["7","1"],["3","5"],["7","1"],["5"]]},SECOND_DOM_7_ARPEGGIO:{rootStringNumber:4,positionName:"2nd",name:"2nd - Dom 7 Arpeggio",fretOffsets:[[0,3],[2],[0,2],[-1,2],[0],[0,3]],intervals:[["5","b7"],["3"],["b7","1"],["3","5"],["1"],["5","b7"]]},SECOND_MINOR_TRIAD_ARPEGGIO:{rootStringNumber:4,positionName:"2nd",name:"2nd - Minor Triad Arpeggio",fretOffsets:[[0],[1],[2],[2],[0,3],[0]],intervals:[["5"],["b3"],["1"],["5"],["1","b3"],["5"]]},SECOND_MINOR_7_ARPEGGIO:{rootStringNumber:4,positionName:"2nd",name:"2nd - Minor 7 Arpeggio",fretOffsets:[[0,3],[1],[0,2],[2],[0,3],[0,3]],intervals:[["5","b7"],["b3"],["b7","1"],["5"],["1","b3"],["5","b7"]]},SECOND_MINOR_7_B5_ARPEGGIO:{rootStringNumber:4,positionName:"2nd",name:"2nd - Minor 7 b5 Arpeggio",fretOffsets:[[-1,3],[1],[0,2],[1],[0,3],[-1,3]],intervals:[["b5","b7"],["b3"],["b7","1"],["b5"],["1","b3"],["b5","b7"]]},SECOND_MAJOR_PENTA:{rootStringNumber:4,positionName:"2nd",name:"2nd - Pentatonic (Major)",fretOffsets:[[0,2],[0,2],[-1,2],[-1,2],[0,2],[0,2]],intervals:[["2","6"],["3","3"],["6","1"],["3","5"],["1","2"],["5","6"]]},SECOND_MINOR_PENTA:{rootStringNumber:4,positionName:"2nd",name:"2nd - Pentatonic (Minor)",fretOffsets:[[0,3],[1,3],[0,2],[0,2],[0,3],[0,3]],intervals:[["5","b7"],["b3","4"],["b7","1"],["4","5"],["1","b3"],["5","b7"]]},THIRD:{rootStringNumber:5,positionName:"3rd",name:"3rd - Scale",fretOffsets:[[-3,-1,0],[-3,-2,0],[-4,-3,-1],[-3,-1],[-3,-1,0],[-3,-1,0]],intervals:[["6","7","1"],["3","4","5"],["7","1","2"],["5","6"],["2","3","4"],["6","7","1"]]},THIRD_MAJOR_7_ARPEGGIO:{rootStringNumber:5,positionName:"3rd",name:"3rd - Major 7 Arpeggio",fretOffsets:[[-1,0],[-3,0],[-4,-3],[-3],[-1],[-1,0]],intervals:[["7","1"],["3","5"],["7","1"],["5"],["3"],["7","1"]]},THIRD_DOM_7_ARPEGGIO:{rootStringNumber:5,positionName:"3rd",name:"3rd - Dom 7 Arpeggio",fretOffsets:[[-2,0],[-3,0],[-3],[-3,0],[-1],[-2,0]],intervals:[["b7","1"],["3","5"],["1"],["5","b7"],["3"],["b7","1"]]},THIRD_MINOR_7_ARPEGGIO:{rootStringNumber:5,positionName:"3rd",name:"3rd - Minor 7 Arpeggio",fretOffsets:[[-2,0],[0],[-3,0],[-3,0],[-2],[-2,0]],intervals:[["b7","1"],["5"],["1","b3"],["5","b7"],["b3"],["b7","1"]]},THRID_MAJOR_PENTA:{rootStringNumber:5,positionName:"3rd",name:"3rd - Pentatonic (Major)",fretOffsets:[[-3,0],[-3,0],[-3,-1],[-3,-1],[-3,-1],[-3,0]],intervals:[["6","1"],["3","5"],["1","2"],["5","6"],["2","3"],["4","1"]]},THIRD_MINOR_PENTA:{rootStringNumber:5,positionName:"3rd",name:"3rd - Pentatonic (Minor)",fretOffsets:[[-2,0],[-2,0],[-3,0],[-3,0],[-2,0],[-2,0]],intervals:[["b7","1"],["4","5"],["1","3"],["5","b7"],["b3","4"],["b7","1"]]},FORTH:{rootStringNumber:5,positionName:"4th",name:"4th - Scale",fretOffsets:[[-1,0,2],[0,2],[-1,1,2],[-1,1,2],[-1,0,2],[-1,0,2]],intervals:[["7","1","2"],["5","6"],["2","3","4"],["6","7","1"],["3","4","5"],["7","1","2"]]},FORTH_MAJOR_7_ARPEGGIO:{default:!0,rootStringNumber:5,positionName:"4th",name:"4th - Major 7 Arpeggio",fretOffsets:[[-1,0],[0],[1],[1,2],[-1,2],[-1,0]],intervals:[["7","1"],["5"],["3"],["7","1"],["3","5"],["7","1"]]},FORTH_DOM_7_ARPEGGIO:{rootStringNumber:5,positionName:"4th",name:"4th - Dom 7 Arpeggio",fretOffsets:[[0,5],[0,2],[1],[0,2],[-1,2],[0]],intervals:[["1","3"],["5","b7"],["3"],["b7","1"],["3","5"],["1"]]},FORTH_MAJOR_PENTA:{rootStringNumber:5,positionName:"4th",name:"4th - Pentatonic (Major)",fretOffsets:[[0,2],[0,2],[-1,1],[-1,2],[-1,2],[0,2]],intervals:[["1","2"],["5","6"],["2","3"],["6","1"],["3","5"],["1","2"]]},FORTH_MINOR_PENTA:{rootStringNumber:5,positionName:"4th",name:"4th - Pentatonic (Minor)",fretOffsets:[[0,3],[0,3],[0,2],[0,2],[0,2],[0,3]],intervals:[["1","b3"],["5","b7"],["b3","4"],["b7","1"],["4","5"],["1","b3"]]},FIFTH_MAJOR_7_SCALE:{rootStringNumber:3,positionName:"5th",name:"5th - Major 7 Scale",fretOffsets:[[0,2,3],[0,2,3],[-1,0,2],[-1,0,2],[0,2],[0,2,3]],intervals:[["2","3","4"],["6","7","1"],["3","4","5"],["7","1","2"],["5","6"],["2","3","4"]]},FIFTH_MAJOR_7_ARPEGGIO:{default:!0,rootStringNumber:3,positionName:"5th",name:"5th - Major 7 Arpeggio",fretOffsets:[[2],[2,3],[-1,2],[-1,0],[0],[2]],intervals:[["3"],["7","1"],["3","5"],["7","1"],["5"],["3"]]},FIFTH_DOM_7_ARPEGGIO:{rootStringNumber:3,positionName:"5th",name:"5th - Dom 7 Arpeggio",fretOffsets:[[2],[1,3],[-1,2],[0],[0,3],[2]],intervals:[["3"],["b7","1"],["3","5"],["1"],["5","b7"],["3"]]},FIFTH_MINOR_7_ARPEGGIO:{rootStringNumber:3,positionName:"5th",name:"5th - Minor 7 Arpeggio",fretOffsets:[[1],[1,3],[2],[0,3],[0,3],[2]],intervals:[["b3"],["b7","1"],["5"],["1","b3"],["5","b7"],["b3"]]},FIFTH_MAJOR_PENTA:{rootStringNumber:3,positionName:"5th",name:"5th - Pentatonic (Major)",fretOffsets:[[0,2],[0,3],[-1,2],[0,2],[0,2],[0,2]],intervals:[["2","3"],["6","1"],["3","5"],["1","2"],["5","6"],["2","3"]]},FIFTH_MINOR_PENTA:{rootStringNumber:3,positionName:"5th",name:"5th - Pentatonic (Minor)",fretOffsets:[[1,3],[1,3],[0,2],[0,3],[0,3],[1,3]],intervals:[["b3","4"],["b7","1"],["4","5"],["1","b3"],["5","b7"],["b3","4"]]}},resolveNotesForScale:function(e,t,n){for(var r=new Map,s=n.fretOffsets,i=n.intervals,o=0;o<s.length;o+=1)for(var a=s[o],c=0;c<a.length;c+=1){var l=e.getNoteAt(o,t+a[c]);l&&r.set(l,i?i[o][c]:"?")}return r},getPositionsForString:function(e){return Object.values(this.POSITIONS).filter((function(t){return t.rootStringNumber===e}))}},A=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"delete",value:function(){this.props.onDelete&&this.props.onDelete(this.props.value)}},{key:"select",value:function(e){this.props.onChange&&this.props.onChange(this.props.value,e)}},{key:"onCheck",value:function(e){this.props.onCheck&&this.props.onCheck(this.props.value)}},{key:"render",value:function(){var e=this,t="https://onlineguitarbooks.com/"+this.props.value.name+"-chord/",n={backgroundColor:this.props.value.color},r=S.getPositionsForString(this.props.value.toneState.stringNumber);return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{style:n}),Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{type:"checkbox",checked:this.props.value.enabled,onChange:function(t){return e.onCheck(t)}}),Object(h.jsxs)("a",{href:t,target:"_blank",rel:"noreferrer",children:[this.props.value.name," (",this.props.value.toneState.stringNumber+1,", ",this.props.value.toneState.fret,")"]})]}),Object(h.jsx)("div",{children:Object(h.jsx)(m,{value:this.props.value.position,options:r,onChange:function(t){return e.select(t)}})}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{onClick:function(t){return e.delete()},children:"delete"})})]})}}]),n}(s.a.Component),_=A,M=function(){function e(t,n,r,s){Object(a.a)(this,e),this.uid=t,this.name=n,this.stringNumber=r,this.fret=s,this.usedIn=new Map,this.position=0===s?"Open "+n:n+" "+(r+1)+" @ "+s}return Object(c.a)(e,[{key:"select",value:function(e,t){this.usedIn.set(e.uid,t)}},{key:"deselect",value:function(e){this.usedIn.delete(e.uid)}},{key:"isUsedInScale",value:function(e){return this.usedIn.has(e.uid)}},{key:"getIntervalLabel",value:function(e){return this.usedIn.get(e.uid)}}]),e}(),R=function(){function e(t,n){Object(a.a)(this,e),this.name=S.TONES[t],this.uid="string-"+this.name+"-"+n,this.intervalOffset=t,this.tones=[];for(var r=0;r<17;r++){var s=t+r,i=S.TONES[s%S.TONES.length];this.tones.push(new M(this.uid+"."+r,i,n,r))}}return Object(c.a)(e,[{key:"getNoteAt",value:function(e){return e>=0&&e<this.tones.length?this.tones[e]:void 0}}]),e}(),I=function(){function e(){Object(a.a)(this,e),this.strings=[],this.strings.push(new R(4,0)),this.strings.push(new R(11,1)),this.strings.push(new R(7,2)),this.strings.push(new R(2,3)),this.strings.push(new R(9,4)),this.strings.push(new R(4,5))}return Object(c.a)(e,[{key:"getNoteAt",value:function(e,t){return this.strings[e].getNoteAt(t)}}]),e}(),E=["#4E79A5","#F18F3B","#E0585B","#77B7B2","#5AA155","#EDC958","#AF7AA0","#FE9EA8","#9C7561","#BAB0AC"],k=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;Object(a.a)(this,n),r=t.call(this,e);var s=new I;return r.state={key:S.KEYS.C_MAJOR,scales:[],guitarState:s},r}return Object(c.a)(n,[{key:"updateKey",value:function(e){this.setState({key:e})}},{key:"deleteScale",value:function(e){var t=this.state.scales;e.notes.forEach((function(t){return t.deselect(e)})),this.setState({scales:t.filter((function(t){return t.uid!==e.uid}))})}},{key:"updatePosition",value:function(e,t){console.log("Swap Position",t,e);var n=this.state.scales;e.notes.forEach((function(t){return t.deselect(e)}));var r=S.resolveNotesForScale(this.state.guitarState,e.toneState.fret,t);e.notes=[],r.forEach((function(t,n){n.select(e,t),e.notes.push(n)})),this.setState({scales:n})}},{key:"resolveNotesForScale",value:function(e){var t=e.toneState.stringNumber,n=S.getPositionsForString(t);if(void 0===n||n.length<1)return[];var r=n.find((function(e){return!0===e.default}));return e.position=r||n[0],S.resolveNotesForScale(this.state.guitarState,e.toneState.fret,e.position)}},{key:"onClick",value:function(e){var t=this.state.scales,n=E[t.length%E.length],r={uid:"scale."+e.stringNumber+"."+e.fret+"."+t.length,name:e.name,fret:e.fret,toneState:e,scale:S.KEYS.C_MAJOR,color:n,enabled:!0},s=this.resolveNotesForScale(r);console.log(s,s.keys),s.size>0&&(r.notes=[],s.forEach((function(e,t){console.log(t),r.notes.push(t),t.select(r,e)})),t.push(r),this.setState({scales:t}))}},{key:"onCheck",value:function(e){e.enabled=!e.enabled,this.setState({scales:this.state.scales})}},{key:"render",value:function(){for(var e=this,t=this.state.guitarState.strings[0].tones.length,n=Object.values(S.KEYS),r=[],s=0;s<t;s++){var i="";3===s||5===s||7===s||9===s||15===s||17===s||19===s||21===s?i+="\u25cf":12===s&&(i+="\u25cf\u25cf"),r.push(Object(h.jsx)("div",{className:"fret-marker",children:i},"fretMarker"+s)),r.push(Object(h.jsx)("div",{className:"fret-spacer"},"fretSpacer"+s))}return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"keySelector",children:Object(h.jsx)(m,{label:"Key",onChange:function(t){return e.updateKey(t)},options:n,value:this.state.key},"keySelector")}),Object(h.jsxs)("div",{className:"fret-board",children:[this.state.guitarState.strings.map((function(t){return Object(h.jsx)(d,{musicKey:e.state.key,value:t,onClick:function(t,n,r){return e.onClick(t,n,r)},scales:e.state.scales},t.uid)})),Object(h.jsx)("div",{className:"fret-markers",children:r})]}),Object(h.jsxs)("div",{className:"scaleTable",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{children:"Color"}),Object(h.jsx)("div",{children:"Root"}),Object(h.jsx)("div",{children:"Position"}),Object(h.jsx)("div",{children:"..."})]}),this.state.scales.map((function(t){return Object(h.jsx)(_,{onDelete:function(t){return e.deleteScale(t)},onChange:function(t,n){return e.updatePosition(t,n)},onCheck:function(t){return e.onCheck(t)},value:t},t.uid)}))]})]})}}]),n}(s.a.Component);var P=function(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(k,{},"fretboard")})};o.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(P,{})}),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.bf957cb3.chunk.js.map